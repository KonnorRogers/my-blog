{"componentChunkName":"component---src-templates-blog-post-js","path":"/bridgetownrb/dockerizing-bridgetown/","result":{"data":{"site":{"siteMetadata":{"title":"Konnor's Blog","author":"Konnor Rogers"}},"markdownRemark":{"id":"5f3ea129-9ed7-5b32-b9bf-01b31d7b173a","excerpt":"So what does this mean? To me it means it is a\nstatic site generator that uses Webpack under the hood and can source\ndata from other places like a CMS or…","html":"<h2 align=\"center\"> What is Bridgetownrb? </h2>\n<p align=\"center\" style=\"background: #F0FFF0; border-radius: 16px; padding: 1rem;\">\n  <a href=\"https://bridgetownrb.com\">\n    Bridgetownrb\n  </a>\n  is a \"Webpack-aware,\n  <br />\n  Ruby-powered static site generator\n  <br />\n  for the modern Jamstack era.\"\n</p>\n<br />\n<p>So what does this mean? To me it means it is a\nstatic site generator that uses Webpack under the hood and can source\ndata from other places like a CMS or markdown files just like other static site generators such as\n<a href=\"https://gatsbyjs.org\">Gatsby</a> or <a href=\"https://gridsome.org/\">Gridsome</a></p>\n<h2 id=\"table-of-contents\">\n  <a href=\"#table-of-contents\">\n    Table Of Contents\n  </a>\n</h2>\n<ul>\n<li><a href=\"#prerequisites\">Prerequisites</a></li>\n<li><a href=\"#create-directory\">Create a new directory</a></li>\n<li>\n<p><a href=\"#docker-files\">Docker Files</a></p>\n<ul>\n<li><a href=\"#adding-dockerfile\">Adding a Dockerfile</a></li>\n<li><a href=\"#adding-docker-compose\">Adding a docker-compose.yml</a></li>\n<li><a href=\"#adding-docker-env\">Adding a docker.env</a></li>\n<li><a href=\"#adding-docker-ignore\">Adding a .dockerignore</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#dep-files\">Dependency Files</a></p>\n<ul>\n<li><a href=\"#adding-gemfile\">Adding a Gemfile</a></li>\n<li><a href=\"#adding-package-json\">Adding a package.json</a></li>\n<li><a href=\"#adding-lockfiles\">Adding lockfiles</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#generating-a-project\">Generating a project</a></p>\n<ul>\n<li><a href=\"#prior-to-new\">File structure prior to generation</a></li>\n<li><a href=\"#generation-command\">Running the Generation Command</a></li>\n<li><a href=\"#post-new\">File structure post generation</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#commands\">Useful Commands</a></p>\n<ul>\n<li><a href=\"#starting-the-server\">Starting the server</a></li>\n<li><a href=\"#stopping-the-server\">Stopping the server</a></li>\n<li><a href=\"#other-commands\">Other commands</a></li>\n</ul>\n</li>\n<li><a href=\"#i-know\">I know what I’m doing</a></li>\n<li><a href=\"#links\">Links</a></li>\n<li><a href=\"#going-forward\">Going forward</a></li>\n</ul>\n<h2>Note:</h2>\n<p>If you would like to skip straight to building without explanations feel\nfree to go to the <a href=\"#i-know\">I know what I’m doing</a> section.</p>\n<h2 id=\"prerequisites\">\n  <a href=\"#prerequisites\">\n    Prerequisites\n  </a>\n</h2>\n<p>There are only 2 prerequisites for this project.</p>\n<p>Docker &#x26; Docker Compose. To check you have them, run the following:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"80204897052336850000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker -v\n# Docker version 19.03.6, build 369ce74a3c\n\ndocker-compose -v\n# docker-compose version 1.25.0, build unknown`, `80204897052336850000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker -v\n<span class=\"token comment\"># Docker version 19.03.6, build 369ce74a3c</span>\n\ndocker-compose -v\n<span class=\"token comment\"># docker-compose version 1.25.0, build unknown</span></code></pre></div>\n<h2 id=\"create-directory\">\n  <a href=\"#create-directory\">\n  Create a new directory\n  </a>\n</h3>\n<p>Now that we’ve confirmed Docker and Docker Compose are installed, lets\nsetup the initial structure for Docker to pull down Bridgetownrb so we\ndo not have to install it locally.</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"51703481881455710000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`mkdir -p bridgetown-project\ncd bridgetown-project`, `51703481881455710000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p bridgetown-project\n<span class=\"token builtin class-name\">cd</span> bridgetown-project</code></pre></div>\n<h2 id=\"docker-files\">\n  <a href=\"#docker-files\">\n    Docker Files\n  </a>\n</h2>\n<h3 id=\"adding-dockerfile\">\n  <a href=\"#adding-dockerfile\">\n    Adding a Dockerfile\n  </a>\n</h3>\n<p>I’m not goin to go too in depth into this Dockerfile, but the point of\nit is to be able to run a Docker container as a non-root user and still\ndo everything you need to do. We’ll be using Alpine Linux to keep the\nimage small.</p>\n<p>Create a <code class=\"language-text\">Dockerfile</code> and add the following contents into it.</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"34914450337337643000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# Dockerfile\n\nFROM ruby:2.6-alpine3.11 as builder\n\nRUN apk add --no-cache --virtual \\\\\n    #\n    # required\n    nodejs-dev yarn bash \\\\\n    tzdata build-base libffi-dev \\\\\n    #\n    # nice to haves\n    curl git \\\\\n    #\n    # Fixes watch file isses with things like HMR\n    libnotify-dev\n\nFROM builder as bridgetownrb-app\n\n# This is to fix an issue on Linux with permissions issues\nARG USER_ID=\\${USER_ID:-1000}\nARG GROUP_ID=\\${GROUP_ID:-1000}\nARG DOCKER_USER=\\${DOCKER_USER:-user}\nARG APP_DIR=\\${APP_DIR:-/home/user/bridgetown-app}\n\n# Create a non-root user\nRUN addgroup -g \\$GROUP_ID -S \\$GROUP_ID\nRUN adduser --disabled-password -G \\$GROUP_ID --uid \\$USER_ID -S \\$DOCKER_USER\n\n# Create and then own the directory to fix permissions issues\nRUN mkdir -p \\$APP_DIR\nRUN chown -R \\$USER_ID:\\$GROUP_ID \\$APP_DIR\n\n# Define the user running the container\nUSER \\$USER_ID:\\$GROUP_ID\n\n# . now == \\$APP_DIR\nWORKDIR \\$APP_DIR\n\n# COPY is run as a root user, not as the USER defined above, so we must chown it\nCOPY --chown=\\$USER_ID:\\$GROUP_ID Gemfile* \\$APP_DIR/\nRUN gem install bundler\nRUN bundle install\n\n# For webpacker / node_modules\nCOPY --chown=\\$USER_ID:\\$GROUP_ID package.json \\$APP_DIR\nCOPY --chown=\\$USER_ID:\\$GROUP_ID yarn.lock \\$APP_DIR\n\nRUN yarn install\n\nCMD [&quot;yarn&quot;, &quot;start&quot;]`, `34914450337337643000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token comment\"># Dockerfile</span>\n\n<span class=\"token keyword\">FROM</span> ruby<span class=\"token punctuation\">:</span>2.6<span class=\"token punctuation\">-</span>alpine3.11 as builder\n\n<span class=\"token keyword\">RUN</span> apk add <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>no<span class=\"token punctuation\">-</span>cache <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>virtual \\\\\n    <span class=\"token comment\">#</span>\n    <span class=\"token comment\"># required</span>\n    nodejs<span class=\"token punctuation\">-</span>dev yarn bash \\\\\n    tzdata build<span class=\"token punctuation\">-</span>base libffi<span class=\"token punctuation\">-</span>dev \\\\\n    <span class=\"token comment\">#</span>\n    <span class=\"token comment\"># nice to haves</span>\n    curl git \\\\\n    <span class=\"token comment\">#</span>\n    <span class=\"token comment\"># Fixes watch file isses with things like HMR</span>\n    libnotify<span class=\"token punctuation\">-</span>dev\n\n<span class=\"token keyword\">FROM</span> builder as bridgetownrb<span class=\"token punctuation\">-</span>app\n\n<span class=\"token comment\"># This is to fix an issue on Linux with permissions issues</span>\n<span class=\"token keyword\">ARG</span> USER_ID=$<span class=\"token punctuation\">{</span>USER_ID<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>1000<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">ARG</span> GROUP_ID=$<span class=\"token punctuation\">{</span>GROUP_ID<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>1000<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">ARG</span> DOCKER_USER=$<span class=\"token punctuation\">{</span>DOCKER_USER<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>user<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">ARG</span> APP_DIR=$<span class=\"token punctuation\">{</span>APP_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>/home/user/bridgetown<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># Create a non-root user</span>\n<span class=\"token keyword\">RUN</span> addgroup <span class=\"token punctuation\">-</span>g $GROUP_ID <span class=\"token punctuation\">-</span>S $GROUP_ID\n<span class=\"token keyword\">RUN</span> adduser <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>disabled<span class=\"token punctuation\">-</span>password <span class=\"token punctuation\">-</span>G $GROUP_ID <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>uid $USER_ID <span class=\"token punctuation\">-</span>S $DOCKER_USER\n\n<span class=\"token comment\"># Create and then own the directory to fix permissions issues</span>\n<span class=\"token keyword\">RUN</span> mkdir <span class=\"token punctuation\">-</span>p $APP_DIR\n<span class=\"token keyword\">RUN</span> chown <span class=\"token punctuation\">-</span>R $USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID $APP_DIR\n\n<span class=\"token comment\"># Define the user running the container</span>\n<span class=\"token keyword\">USER</span> $USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID\n\n<span class=\"token comment\"># . now == $APP_DIR</span>\n<span class=\"token keyword\">WORKDIR</span> $APP_DIR\n\n<span class=\"token comment\"># COPY is run as a root user, not as the USER defined above, so we must chown it</span>\n<span class=\"token keyword\">COPY</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID Gemfile* $APP_DIR/\n<span class=\"token keyword\">RUN</span> gem install bundler\n<span class=\"token keyword\">RUN</span> bundle install\n\n<span class=\"token comment\"># For webpacker / node_modules</span>\n<span class=\"token keyword\">COPY</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID package.json $APP_DIR\n<span class=\"token keyword\">COPY</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID yarn.lock $APP_DIR\n\n<span class=\"token keyword\">RUN</span> yarn install\n\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"yarn\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"start\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-bridgetown/blob/prior-bridgetown-new/Dockerfile\">Reference File on\nGithub</a></p>\n<h3 id=\"adding-docker-compose\">\n  <a href=\"#adding-docker-compose\">\n    Adding a docker-compose.yml\n  </a>\n</h3>\n<p>Now that we have a Dockerfile as our base, lets make it easy to call the\nDockerfile without having to specify a bunch of build arguments.</p>\n<p>Create a <code class=\"language-text\">docker-compose.yml</code> and add the following content:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"83568197900380450000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# docker-compose.yml\n\nversion: &quot;3&quot;\n\nservices:\n  web:\n    build:\n      context: .\n      dockerfile: Dockerfile\n      args:\n        USER_ID: \\${USER_ID:-1000}\n        GROUP_ID: \\${GROUP_ID:-1000}\n        DOCKER_USER: \\${DOCKER_USER:-user}\n        APP_DIR: \\${APP_DIR:-/home/user/bridgetown-app}\n\n    command: bash -c &quot;yarn start --host '0.0.0.0'&quot;\n\n    ports:\n      - &quot;4000:4000&quot;\n      # Not totally necessary to open 4001, but it is used, so lets make it discoverable\n      - &quot;4001:4001&quot;\n      - &quot;4002:4002&quot;\n\n    volumes:\n      - .:\\${APP_DIR:-/home/user/bridgetown-app}\n      # this seperates node_modules from the host\n      - node_modules:\\${APP_DIR:-/home/user/bridgetown-app}/node_modules\n\nvolumes:\n  node_modules:`, `83568197900380450000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># docker-compose.yml</span>\n\n<span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">context</span><span class=\"token punctuation\">:</span> .\n      <span class=\"token key atrule\">dockerfile</span><span class=\"token punctuation\">:</span> Dockerfile\n      <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">USER_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>USER_ID<span class=\"token punctuation\">:</span><span class=\"token number\">-1000</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">GROUP_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>GROUP_ID<span class=\"token punctuation\">:</span><span class=\"token number\">-1000</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">DOCKER_USER</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>DOCKER_USER<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>user<span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">APP_DIR</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>APP_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>/home/user/bridgetown<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">}</span>\n\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> bash <span class=\"token punctuation\">-</span>c \"yarn start <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>host '0.0.0.0'\"\n\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"4000:4000\"</span>\n      <span class=\"token comment\"># Not totally necessary to open 4001, but it is used, so lets make it discoverable</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"4001:4001\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"4002:4002\"</span>\n\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> .<span class=\"token punctuation\">:</span>$<span class=\"token punctuation\">{</span>APP_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>/home/user/bridgetown<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">}</span>\n      <span class=\"token comment\"># this seperates node_modules from the host</span>\n      <span class=\"token punctuation\">-</span> node_modules<span class=\"token punctuation\">:</span>$<span class=\"token punctuation\">{</span>APP_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>/home/user/bridgetown<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">}</span>/node_modules\n\n<span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n  node_modules<span class=\"token punctuation\">:</span></code></pre></div>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-bridgetown/blob/master/docker-compose.yml\">Reference File on\nGithub</a></p>\n<h3 id=\"adding-docker-env\">\n  <a href=\"#adding-docker-env\">\n    Adding docker.env\n  </a>\n</h3>\n<p>You’ll notice above that theres a bunch of ENV variables being used to\nsubstitute values. Now there’s a few ways to provide the ENV variables\nto Docker. I’ve found the easiest way to pass ENV variables is by\nsourcing a file with ENV variables.</p>\n<p>To show you what this looks like lets create a ‘docker.env’ file.</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"13864466543007214000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# docker.env\n\n# Assign and export seperately to avoid masking return values.\nUSER_ID=\\$(id -u &quot;\\$USER&quot;)\nGROUP_ID=\\$(id -g &quot;\\$USER&quot;)\nexport USER_ID\nexport GROUP_ID\n\nexport DOCKER_USER=&quot;user&quot;\nexport APP_DIR=&quot;/home/\\$DOCKER_USER/bridgetown&quot;`, `13864466543007214000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># docker.env</span>\n\n<span class=\"token comment\"># Assign and export seperately to avoid masking return values.</span>\n<span class=\"token assign-left variable\">USER_ID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -u <span class=\"token string\">\"<span class=\"token environment constant\">$USER</span>\"</span><span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">GROUP_ID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -g <span class=\"token string\">\"<span class=\"token environment constant\">$USER</span>\"</span><span class=\"token variable\">)</span></span>\n<span class=\"token builtin class-name\">export</span> USER_ID\n<span class=\"token builtin class-name\">export</span> GROUP_ID\n\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">DOCKER_USER</span><span class=\"token operator\">=</span><span class=\"token string\">\"user\"</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">APP_DIR</span><span class=\"token operator\">=</span><span class=\"token string\">\"/home/<span class=\"token variable\">$DOCKER_USER</span>/bridgetown\"</span></code></pre></div>\n<p>Now in order to pull these values into your shell environment run the\nfollowing command:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"90500410346316410000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`source ./docker.env`, `90500410346316410000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> ./docker.env</code></pre></div>\n<p>This will now pull in your ENV variables for docker to use.</p>\n<h4>Note:</h4>\n<p>This is really only necessary for Linux users. Mac and Windows users\n<em>should</em> be fine to run without this script. It has not been tested\nhowever.</p>\n<h3 id=\"adding-docker-ignore\">\n  <a href=\"#adding-docker-ignore\">\n    Adding .dockerignore\n  </a>\n</h3>\n<p>The final piece to this Docker puzzle is to create a <code class=\"language-text\">.dockerignore</code>. I stole the <code class=\"language-text\">.gitignore</code> provided by Bridgetownrb for this. It looks as follows:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"45404555744407120000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# .dockerignore\n\n# Bridgetown\noutput\n.bridgetown-cache\n.bridgetown-metadata\n.bridgetown-webpack\n\n# Dependency folders\nnode_modules\nbower_components\nvendor\n\n# Caches\n.sass-cache\n.npm\n.node_repl_history\n\n# Ignore bundler config.\n/.bundle\n\n# Ignore Byebug command history file.\n.byebug_history\n\n# dotenv environment variables file\n.env\n\n# Mac files\n.DS_Store\n\n# Yarn\nyarn-error.log\nyarn-debug.log*\n.pnp/\n.pnp.js\n# Yarn Integrity file\n.yarn-integrity\n\n.git`, `45404555744407120000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># .dockerignore</span>\n\n<span class=\"token comment\"># Bridgetown</span>\noutput\n.bridgetown-cache\n.bridgetown-metadata\n.bridgetown-webpack\n\n<span class=\"token comment\"># Dependency folders</span>\nnode_modules\nbower_components\nvendor\n\n<span class=\"token comment\"># Caches</span>\n.sass-cache\n.npm\n.node_repl_history\n\n<span class=\"token comment\"># Ignore bundler config.</span>\n/.bundle\n\n<span class=\"token comment\"># Ignore Byebug command history file.</span>\n.byebug_history\n\n<span class=\"token comment\"># dotenv environment variables file</span>\n.env\n\n<span class=\"token comment\"># Mac files</span>\n.DS_Store\n\n<span class=\"token comment\"># Yarn</span>\nyarn-error.log\nyarn-debug.log*\n.pnp/\n.pnp.js\n<span class=\"token comment\"># Yarn Integrity file</span>\n.yarn-integrity\n\n.git</code></pre></div>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-bridgetown/blob/prior-bridgetown-new/.dockerignore\">Reference File on\nGithub</a></p>\n<h2 id=\"dep-files\">\n  <a href=\"#dep-files\">\n    Dependency Files\n  </a>\n</h2>\n<h3 id=\"adding-gemfile\">\n  <a href=\"#adding-gemfile\">\n    Adding a Gemfile\n  </a>\n</h3>\n<p>Alright, with the Docker setup above, we can now specify our\ndependency files.</p>\n<p>The first step is to create a <code class=\"language-text\">Gemfile</code>. Create a Gemfile as follows:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"57756780438005030000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# Gemfile\n\nsource &quot;https://rubygems.org&quot;\ngem &quot;bridgetown&quot;, &quot;~> 0.14.0&quot;`, `57756780438005030000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># Gemfile</span>\n\nsource <span class=\"token string\">\"https://rubygems.org\"</span>\ngem <span class=\"token string\">\"bridgetown\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"~> 0.14.0\"</span></code></pre></div>\n<p>This will tell <code class=\"language-text\">bundler</code> to install <code class=\"language-text\">bridgetown</code> from Rubygems.org</p>\n<h3 id=\"adding-package-json\">\n  <a href=\"#adding-package-json\">\n    Adding a package.json\n  </a>\n</h3>\n<p>Create a <code class=\"language-text\">package.json</code> structured similarly to the one below:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"30450231479237620000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`{\n  &quot;__filename&quot;: &quot;package.json&quot;,\n  &quot;name&quot;: &quot;bridgetown-site&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;private&quot;: true\n}`, `30450231479237620000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"__filename\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"package.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"bridgetown-site\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"adding-lockfiles\">\n  <a href=\"#adding-lockfiles\">\n    Adding lockfiles\n  </a>\n</h3>\n<p>Almost done with the setup I promise!</p>\n<p>Finally, lets create 2 empty lockfiles.</p>\n<p>The 2 lockfiles are <code class=\"language-text\">yarn.lock</code> and <code class=\"language-text\">Gemfile.lock</code></p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"42585048299789020000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`touch yarn.lock Gemfile.lock`, `42585048299789020000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">touch</span> yarn.lock Gemfile.lock</code></pre></div>\n<h2 id=\"generating-a-project\">\n  <a href=\"#generating-a-project\">\n    Generating a project\n  </a>\n</h2>\n<h3 id=\"prior-to-new\">\n  <a href=\"#prior-to-new\">\n    File structure prior to generation\n  </a>\n</h3>\n<p>Your file structure should look as follows if you followed the above\nsteps.</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"67276889896328050000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`tree -L 1 -a .\n\n.\n├── docker-compose.yml\n├── docker.env\n├── Dockerfile\n├── .dockerignore\n├── Gemfile\n├── Gemfile.lock\n├── package.json\n└── yarn.lock`, `67276889896328050000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">tree -L <span class=\"token number\">1</span> -a <span class=\"token builtin class-name\">.</span>\n\n<span class=\"token builtin class-name\">.</span>\n├── docker-compose.yml\n├── docker.env\n├── Dockerfile\n├── .dockerignore\n├── Gemfile\n├── Gemfile.lock\n├── package.json\n└── yarn.lock</code></pre></div>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-bridgetown/tree/prior-bridgetown-new\">Reference Branch on\nGithub</a></p>\n<h3 id=\"generation-command\">\n  <a href=\"#generation-command\">\n    Running the Generation Command\n  </a>\n</h3>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"63437084602498790000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`source ./docker.env && docker-compose run --rm bridgetown new . --force`, `63437084602498790000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> ./docker.env <span class=\"token operator\">&amp;&amp;</span> docker-compose run --rm bridgetown new <span class=\"token builtin class-name\">.</span> --force</code></pre></div>\n<p>This will generate a new project for <code class=\"language-text\">bridgetown</code></p>\n<h3 id=\"post-new\">\n  <a href=\"#post-new\">\n    File Structure After Generation\n  </a>\n</h3>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"53482515820923160000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`tree -L 1 -a .\n\n.\n├── bridgetown.config.yml\n├── docker-compose.yml\n├── docker.env\n├── Dockerfile\n├── .dockerignore\n├── frontend\n├── Gemfile\n├── Gemfile.lock\n├── .git\n├── .gitignore\n├── package.json\n├── plugins\n├── README.md\n├── src\n├── start.js\n├── sync.js\n├── webpack.config.js\n└── yarn.lock`, `53482515820923160000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">tree -L <span class=\"token number\">1</span> -a <span class=\"token builtin class-name\">.</span>\n\n<span class=\"token builtin class-name\">.</span>\n├── bridgetown.config.yml\n├── docker-compose.yml\n├── docker.env\n├── Dockerfile\n├── .dockerignore\n├── frontend\n├── Gemfile\n├── Gemfile.lock\n├── .git\n├── .gitignore\n├── package.json\n├── plugins\n├── README.md\n├── src\n├── start.js\n├── sync.js\n├── webpack.config.js\n└── yarn.lock</code></pre></div>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-bridgetown/tree/post-bridgetown-new\">Reference Branch on\nGithub</a></p>\n<p>Now, to start your server you can simply run:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"99659586359558320000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`source ./docker.env && docker-compose up --build`, `99659586359558320000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> ./docker.env <span class=\"token operator\">&amp;&amp;</span> docker-compose up --build</code></pre></div>\n<p>This will allow you to view Bridgetown welcome screen on <code class=\"language-text\">localhost:4000</code></p>\n<h2 id=\"commands\">\n  <a href=\"#commands\">\n    Useful Commands\n  </a>\n</h2>\n<h3 id=\"starting-the-server\">\n  <a href=\"#starting-the-server\">\n    Starting the server\n  </a>\n</h3>\n<p>If it’s your first time since generating the project, run</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"16284683601815454000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`source ./docker.env && docker-compose up --build`, `16284683601815454000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> ./docker.env <span class=\"token operator\">&amp;&amp;</span> docker-compose up --build</code></pre></div>\n<p>If you have already built the container, you can simply do:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"80446234726743650000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`source ./docker.env && docker-compose up`, `80446234726743650000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> ./docker.env <span class=\"token operator\">&amp;&amp;</span> docker-compose up</code></pre></div>\n<h3 id=\"stopping-the-server\">\n  <a href=\"#stopping-the-server\">\n    Stopping the server\n  </a>\n</h3>\n<p>In another terminal to stop the server you can simply run:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"65556490354798980000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose down --remove-orphans`, `65556490354798980000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose down --remove-orphans</code></pre></div>\n<h3 id=\"other-commands\">\n  <a href=\"#other-commands\">\n    Other commands\n  </a>\n</h3>\n<p>Sourcing ENV variables\n<br />\nThis is only technically required once in a running terminal.\n<br />\n<code class=\"language-text\">source ./docker.env</code></p>\n<p>Run a command in an already running container:\n<br />\n<code class=\"language-text\">docker-compose exec web [command]</code></p>\n<p>Run a one-off command:\n<br />\n<code class=\"language-text\">docker-compose run --rm web [command]</code></p>\n<p>Upgrading <code class=\"language-text\">package.json</code>:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"84587359156329000000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose run --rm web yarn upgrade\ndocker-compose down --remove-orphans\ndocker-compose up --build`, `84587359156329000000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run --rm web <span class=\"token function\">yarn</span> upgrade\ndocker-compose down --remove-orphans\ndocker-compose up --build</code></pre></div>\n<p>Adding an <code class=\"language-text\">npm</code> package:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"57283208903022500000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose run --rm web yarn add [package]\ndocker-compose down --remove-orphans\ndocker-compose up --build`, `57283208903022500000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run --rm web <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> <span class=\"token punctuation\">[</span>package<span class=\"token punctuation\">]</span>\ndocker-compose down --remove-orphans\ndocker-compose up --build</code></pre></div>\n<p>Adding a gem</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"73801386316258210000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose run --rm web bundle add [gem]\ndocker-compose down --remove-orphans\ndocker-compose up --build`, `73801386316258210000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run --rm web bundle <span class=\"token function\">add</span> <span class=\"token punctuation\">[</span>gem<span class=\"token punctuation\">]</span>\ndocker-compose down --remove-orphans\ndocker-compose up --build</code></pre></div>\n<p>The below is a TLDR / reference version of the above.\nTo skip to the links sections click the link below.\n<br /></p>\n<p><a href=\"#links\">Links section</a></p>\n<h2 id=\"i-know\">\n  <a href=\"#i-know\">\n    I know what I'm doing\n  </a>\n</h2>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"84728183742779490000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`mkdir -p bridgetown-project && cd bridgetown-project\ntouch Gemfile Gemfile.lock package.json yarn.lock \\\\\n      .dockerignore docker-compose.yml Dockerfile docker.env`, `84728183742779490000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p bridgetown-project <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> bridgetown-project\n<span class=\"token function\">touch</span> Gemfile Gemfile.lock package.json yarn.lock <span class=\"token punctuation\">\\</span><span class=\"token punctuation\">\\</span>\n      .dockerignore docker-compose.yml Dockerfile docker.env</code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"56005432630431500000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# Dockerfile\n\nFROM ruby:2.6-alpine3.11 as builder\n\nRUN apk add --no-cache --virtual \\\\\n    #\n    # required\n    nodejs-dev yarn bash \\\\\n    tzdata build-base libffi-dev \\\\\n    #\n    # nice to haves\n    curl git \\\\\n    #\n    # Fixes watch file isses with things like HMR\n    libnotify-dev\n\nFROM builder as bridgetownrb-app\n\n# This is to fix an issue on Linux with permissions issues\nARG USER_ID=\\${USER_ID:-1000}\nARG GROUP_ID=\\${GROUP_ID:-1000}\nARG DOCKER_USER=\\${DOCKER_USER:-user}\nARG APP_DIR=\\${APP_DIR:-/home/user/bridgetown-app}\n\n# Create a non-root user\nRUN addgroup -g \\$GROUP_ID -S \\$GROUP_ID\nRUN adduser --disabled-password -G \\$GROUP_ID --uid \\$USER_ID -S \\$DOCKER_USER\n\n# Create and then own the directory to fix permissions issues\nRUN mkdir -p \\$APP_DIR\nRUN chown -R \\$USER_ID:\\$GROUP_ID \\$APP_DIR\n\n# Define the user running the container\nUSER \\$USER_ID:\\$GROUP_ID\n\n# . now == \\$APP_DIR\nWORKDIR \\$APP_DIR\n\n# COPY is run as a root user, not as the USER defined above, so we must chown it\nCOPY --chown=\\$USER_ID:\\$GROUP_ID Gemfile* \\$APP_DIR/\nRUN gem install bundler\nRUN bundle install\n\n# For webpacker / node_modules\nCOPY --chown=\\$USER_ID:\\$GROUP_ID package.json \\$APP_DIR\nCOPY --chown=\\$USER_ID:\\$GROUP_ID yarn.lock \\$APP_DIR\n\nRUN yarn install\n\nCMD [&quot;yarn&quot;, &quot;start&quot;]`, `56005432630431500000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token comment\"># Dockerfile</span>\n\n<span class=\"token keyword\">FROM</span> ruby<span class=\"token punctuation\">:</span>2.6<span class=\"token punctuation\">-</span>alpine3.11 as builder\n\n<span class=\"token keyword\">RUN</span> apk add <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>no<span class=\"token punctuation\">-</span>cache <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>virtual \\\\\n    <span class=\"token comment\">#</span>\n    <span class=\"token comment\"># required</span>\n    nodejs<span class=\"token punctuation\">-</span>dev yarn bash \\\\\n    tzdata build<span class=\"token punctuation\">-</span>base libffi<span class=\"token punctuation\">-</span>dev \\\\\n    <span class=\"token comment\">#</span>\n    <span class=\"token comment\"># nice to haves</span>\n    curl git \\\\\n    <span class=\"token comment\">#</span>\n    <span class=\"token comment\"># Fixes watch file isses with things like HMR</span>\n    libnotify<span class=\"token punctuation\">-</span>dev\n\n<span class=\"token keyword\">FROM</span> builder as bridgetownrb<span class=\"token punctuation\">-</span>app\n\n<span class=\"token comment\"># This is to fix an issue on Linux with permissions issues</span>\n<span class=\"token keyword\">ARG</span> USER_ID=$<span class=\"token punctuation\">{</span>USER_ID<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>1000<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">ARG</span> GROUP_ID=$<span class=\"token punctuation\">{</span>GROUP_ID<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>1000<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">ARG</span> DOCKER_USER=$<span class=\"token punctuation\">{</span>DOCKER_USER<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>user<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">ARG</span> APP_DIR=$<span class=\"token punctuation\">{</span>APP_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>/home/user/bridgetown<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># Create a non-root user</span>\n<span class=\"token keyword\">RUN</span> addgroup <span class=\"token punctuation\">-</span>g $GROUP_ID <span class=\"token punctuation\">-</span>S $GROUP_ID\n<span class=\"token keyword\">RUN</span> adduser <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>disabled<span class=\"token punctuation\">-</span>password <span class=\"token punctuation\">-</span>G $GROUP_ID <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>uid $USER_ID <span class=\"token punctuation\">-</span>S $DOCKER_USER\n\n<span class=\"token comment\"># Create and then own the directory to fix permissions issues</span>\n<span class=\"token keyword\">RUN</span> mkdir <span class=\"token punctuation\">-</span>p $APP_DIR\n<span class=\"token keyword\">RUN</span> chown <span class=\"token punctuation\">-</span>R $USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID $APP_DIR\n\n<span class=\"token comment\"># Define the user running the container</span>\n<span class=\"token keyword\">USER</span> $USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID\n\n<span class=\"token comment\"># . now == $APP_DIR</span>\n<span class=\"token keyword\">WORKDIR</span> $APP_DIR\n\n<span class=\"token comment\"># COPY is run as a root user, not as the USER defined above, so we must chown it</span>\n<span class=\"token keyword\">COPY</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID Gemfile* $APP_DIR/\n<span class=\"token keyword\">RUN</span> gem install bundler\n<span class=\"token keyword\">RUN</span> bundle install\n\n<span class=\"token comment\"># For webpacker / node_modules</span>\n<span class=\"token keyword\">COPY</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID package.json $APP_DIR\n<span class=\"token keyword\">COPY</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID yarn.lock $APP_DIR\n\n<span class=\"token keyword\">RUN</span> yarn install\n\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"yarn\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"start\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"18646999175340405000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# docker-compose.yml\n\nversion: &quot;3&quot;\n\nservices:\n  web:\n    build:\n      context: .\n      dockerfile: Dockerfile\n      args:\n        USER_ID: \\${USER_ID:-1000}\n        GROUP_ID: \\${GROUP_ID:-1000}\n        DOCKER_USER: \\${DOCKER_USER:-user}\n        APP_DIR: \\${APP_DIR:-/home/user/bridgetown-app}\n\n    command: bash -c &quot;yarn start --host '0.0.0.0'&quot;\n\n    ports:\n      - &quot;4000:4000&quot;\n      # Not totally necessary to open 4001, but it is used, so lets make it discoverable\n      - &quot;4001:4001&quot;\n      - &quot;4002:4002&quot;\n\n    volumes:\n      - .:\\${APP_DIR:-/home/user/bridgetown-app}\n      # this seperates node_modules from the host\n      - node_modules:\\${APP_DIR:-/home/user/bridgetown-app}/node_modules\n\nvolumes:\n  node_modules:`, `18646999175340405000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># docker-compose.yml</span>\n\n<span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">context</span><span class=\"token punctuation\">:</span> .\n      <span class=\"token key atrule\">dockerfile</span><span class=\"token punctuation\">:</span> Dockerfile\n      <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">USER_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>USER_ID<span class=\"token punctuation\">:</span><span class=\"token number\">-1000</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">GROUP_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>GROUP_ID<span class=\"token punctuation\">:</span><span class=\"token number\">-1000</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">DOCKER_USER</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>DOCKER_USER<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>user<span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">APP_DIR</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>APP_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>/home/user/bridgetown<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">}</span>\n\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> bash <span class=\"token punctuation\">-</span>c \"yarn start <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>host '0.0.0.0'\"\n\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"4000:4000\"</span>\n      <span class=\"token comment\"># Not totally necessary to open 4001, but it is used, so lets make it discoverable</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"4001:4001\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"4002:4002\"</span>\n\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> .<span class=\"token punctuation\">:</span>$<span class=\"token punctuation\">{</span>APP_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>/home/user/bridgetown<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">}</span>\n      <span class=\"token comment\"># this seperates node_modules from the host</span>\n      <span class=\"token punctuation\">-</span> node_modules<span class=\"token punctuation\">:</span>$<span class=\"token punctuation\">{</span>APP_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>/home/user/bridgetown<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">}</span>/node_modules\n\n<span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n  node_modules<span class=\"token punctuation\">:</span></code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"80005033829938270000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# docker.env\n\n# Assign and export seperately to avoid masking return values.\nUSER_ID=\\$(id -u &quot;\\$USER&quot;)\nGROUP_ID=\\$(id -g &quot;\\$USER&quot;)\nexport USER_ID\nexport GROUP_ID\n\nexport DOCKER_USER=&quot;user&quot;\nexport APP_DIR=&quot;/home/\\$DOCKER_USER/bridgetown&quot;`, `80005033829938270000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># docker.env</span>\n\n<span class=\"token comment\"># Assign and export seperately to avoid masking return values.</span>\n<span class=\"token assign-left variable\">USER_ID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -u <span class=\"token string\">\"<span class=\"token environment constant\">$USER</span>\"</span><span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">GROUP_ID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -g <span class=\"token string\">\"<span class=\"token environment constant\">$USER</span>\"</span><span class=\"token variable\">)</span></span>\n<span class=\"token builtin class-name\">export</span> USER_ID\n<span class=\"token builtin class-name\">export</span> GROUP_ID\n\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">DOCKER_USER</span><span class=\"token operator\">=</span><span class=\"token string\">\"user\"</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">APP_DIR</span><span class=\"token operator\">=</span><span class=\"token string\">\"/home/<span class=\"token variable\">$DOCKER_USER</span>/bridgetown\"</span></code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"87970533945988970000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# .dockerignore\n\n# Bridgetown\noutput\n.bridgetown-cache\n.bridgetown-metadata\n.bridgetown-webpack\n\n# Dependency folders\nnode_modules\nbower_components\nvendor\n\n# Caches\n.sass-cache\n.npm\n.node_repl_history\n\n# Ignore bundler config.\n/.bundle\n\n# Ignore Byebug command history file.\n.byebug_history\n\n# dotenv environment variables file\n.env\n\n# Mac files\n.DS_Store\n\n# Yarn\nyarn-error.log\nyarn-debug.log*\n.pnp/\n.pnp.js\n# Yarn Integrity file\n.yarn-integrity\n\n.git`, `87970533945988970000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># .dockerignore</span>\n\n<span class=\"token comment\"># Bridgetown</span>\noutput\n.bridgetown-cache\n.bridgetown-metadata\n.bridgetown-webpack\n\n<span class=\"token comment\"># Dependency folders</span>\nnode_modules\nbower_components\nvendor\n\n<span class=\"token comment\"># Caches</span>\n.sass-cache\n.npm\n.node_repl_history\n\n<span class=\"token comment\"># Ignore bundler config.</span>\n/.bundle\n\n<span class=\"token comment\"># Ignore Byebug command history file.</span>\n.byebug_history\n\n<span class=\"token comment\"># dotenv environment variables file</span>\n.env\n\n<span class=\"token comment\"># Mac files</span>\n.DS_Store\n\n<span class=\"token comment\"># Yarn</span>\nyarn-error.log\nyarn-debug.log*\n.pnp/\n.pnp.js\n<span class=\"token comment\"># Yarn Integrity file</span>\n.yarn-integrity\n\n.git</code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"62741225218033980000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# Gemfile\n\nsource &quot;https://rubygems.org&quot;\ngem &quot;bridgetown&quot;, &quot;~> 0.14.0&quot;`, `62741225218033980000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># Gemfile</span>\n\nsource <span class=\"token string\">\"https://rubygems.org\"</span>\ngem <span class=\"token string\">\"bridgetown\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"~> 0.14.0\"</span></code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"84440566832835510000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`{\n  &quot;__filename&quot;: &quot;package.json&quot;,\n  &quot;name&quot;: &quot;bridgetown-site&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;private&quot;: true\n}`, `84440566832835510000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"__filename\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"package.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"bridgetown-site\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"84935916874985850000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`source ./docker.env\ndocker-compose run --rm web bridgetown new . --force\ndocker-compose up --build`, `84935916874985850000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> ./docker.env\ndocker-compose run --rm web bridgetown new <span class=\"token builtin class-name\">.</span> --force\ndocker-compose up --build</code></pre></div>\n<p>Navigate to <code class=\"language-text\">localhost:4000</code> and bam! up and running!</p>\n<h2 id=\"links\">\n  <a href=\"#links\">\n    Links\n  </a>\n</h2>\n<h3>Bridgetown</h3>\n<p><a href=\"https://www.bridgetownrb.com/\">Bridgetownrb</a></p>\n<p><a href=\"https://www.bridgetownrb.com/docs/\">Bridgetown Getting Started</a></p>\n<h3>Github</h3>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-bridgetown\">Github Reference\nRepo</a></p>\n<h2 id=\"going-forward\">\n  <a href=\"#going-forward\">\n    Going Forward\n  </a>\n</h2>\n<p>This blog post was merely a setup blog post. My next blog post will\ndetail creating a portfolio with TailwindCSS &#x26; Bridgetownrb.</p>\n<p>This is a reference post to point people back to.\nSo stay tuned for the next part of building with bridgetown.</p>\n<p>And if you dont feel like waiting, go check out their documentation.\n<br />\n<a href=\"https://www.bridgetownrb.com/docs/\">Bridgetown Documentation</a></p>\n<p>Good luck building with <a href=\"https://bridgetownrb.com\">Bridgetown</a> and I hope this was useful!</p>","frontmatter":{"title":"Dockerizing Bridgetown","date":"May 23, 2020","description":"Getting started building with Bridgetown by dockerizing it. I'll walk through a Docker setup for Bridgetown using Alpine Linux."}}},"pageContext":{"slug":"/bridgetownrb/dockerizing-bridgetown/","previous":{"fields":{"slug":"/rails/getting-started-with-rails-6/"},"frontmatter":{"title":"Getting Started with Rails 6"}},"next":{"fields":{"slug":"/bridgetownrb/building-with-bridgetown/"},"frontmatter":{"title":"Building with Bridgetown - Portfolio"}}}}}