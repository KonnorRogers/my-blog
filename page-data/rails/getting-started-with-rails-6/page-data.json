{"componentChunkName":"component---src-templates-blog-post-js","path":"/rails/getting-started-with-rails-6/","result":{"data":{"site":{"siteMetadata":{"title":"Konnor's Blog","author":"Konnor Rogers"}},"markdownRemark":{"id":"06d55927-efb0-5834-a05f-7a4fe22a29cf","excerpt":"Purpose The purpose of this is to have a reusable source for setting up a Rails\n6 project. I will be using the Getting Started with Rails\nGuide to setup a\nnew…","html":"<h2>Purpose</h2>\n<p>The purpose of this is to have a reusable source for setting up a Rails\n6 project.</p>\n<p>I will be using the <a href=\"https://guides.rubyonrails.org/getting_started.html\">Getting Started with Rails\nGuide</a> to setup a\nnew Rails projects.</p>\n<p>Initially I used <a href=\"https://docs.docker.com/compose/rails/\">Docker Quickstart with Compose and Rails\nguide</a> but quickly realized I\nhad other needs for Rails 6. My docker setup is the result of multiple\nresources.</p>\n<p>I will also be using Docker just to provide a consistent development\nenvironment. Docker is not required, I used it simply to be able to\nprovide a reproducible environment.</p>\n<p>Source code can be found here:</p>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-rails-6\">https://github.com/ParamagicDev/getting-started-with-rails-6</a></p>\n<p>Deployed application can be found here:</p>\n<p><a href=\"https://getting-started-with-rails-6.herokuapp.com/\">https://getting-started-with-rails-6.herokuapp.com/</a></p>\n<h2 id=\"table-of-contents\">\n  <a href=\"#table-of-contents\">\n    Table Of Contents\n  </a>\n</h2>\n<ul>\n<li><a href=\"#prerequisites\">Prerequisites</a></li>\n<li><a href=\"#technologies\">Main Technologies</a></li>\n<li>\n<p><a href=\"#getting-started\">Getting Started</a></p>\n<ul>\n<li><a href=\"#adding-a-dockerfile\">Adding a Dockerfile</a></li>\n<li><a href=\"#adding-a-gemfile\">Adding a Gemfile</a></li>\n<li><a href=\"#adding-a-package.json\">Adding a package.json</a></li>\n<li><a href=\"#adding-entrypoint-sh\">Adding entrypoint.sh</a></li>\n<li><a href=\"#adding-docker-compose-yml\">Adding docker-compose.yml</a></li>\n<li><a href=\"#adding-a-dot-docker-ignore-file\">Adding a .dockerignore file</a></li>\n<li><a href=\"#prebuild-directory-structure\">Prebuild Directory Structure</a></li>\n<li><a href=\"#prebuild-reference-repository\">Prebuild Reference Repository</a></li>\n<li><a href=\"#postbuild-directory-structure\">Postbuild Directory Structure</a></li>\n<li><a href=\"#postbuild-reference-repository\">Postbuild Reference Repository</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#building-the-project\">Building the Project</a></p>\n<ul>\n<li><a href=\"#create-the-rails-app\">Create the Rails app</a></li>\n<li><a href=\"#ownership-issues\">Ownership Issues</a></li>\n<li><a href=\"#building-the-docker-container\">Building the Docker Container</a></li>\n<li><a href=\"#connecting-the-database\">Connecting the Database</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#using-docker\">Using Docker</a></p>\n<ul>\n<li><a href=\"#stopping-the-application\">Stopping the Application</a></li>\n<li><a href=\"#starting-the-application\">Starting the Application</a></li>\n<li><a href=\"#extra-tips\">Extra Tips</a></li>\n<li><a href=\"#useful-commands\">Useful Commands</a></li>\n</ul>\n</li>\n<li><a href=\"#adding-additional-functionality\">Adding additional functionality</a></li>\n<li><a href=\"#deployment\">Deployment</a></li>\n<li><a href=\"#issues\">Issues</a></li>\n<li><a href=\"#i-know-what-im-doing\">I know what I’m doing</a></li>\n<li>\n<p><a href=\"#links\">Links</a></p>\n<ul>\n<li><a href=\"#source-code\">Github Source Code</a></li>\n<li><a href=\"#deployed-app\">Deployed app on Heroku</a></li>\n<li><a href=\"#submit-a-pull-request\">Found something wrong?</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"prerequisites\">\n  <a href=\"#prerequisites\">\n    Prerequisites\n  </a>\n</h2>\n<ul>\n<li><a href=\"https://docs.docker.com/get-docker/\">Docker</a></li>\n<li><a href=\"https://docs.docker.com/compose/install/\">Docker Compose</a></li>\n</ul>\n<p>Make sure to install both Docker and Docker Compose prior to starting\nthis tutorial.</p>\n<p>To verify run the following:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"72915401930466820000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker -v\n# Docker version 19.03.8\n\ndocker-compose -v\n# docker-compose version 1.25.0`, `72915401930466820000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker -v\n<span class=\"token comment\"># Docker version 19.03.8</span>\n\ndocker-compose -v\n<span class=\"token comment\"># docker-compose version 1.25.0</span></code></pre></div>\n<h2 id=\"technologies\">\n  <a href=\"#technologies\">\n    Main Technologies\n  </a>\n</h2>\n<ul>\n<li>Ruby 2.5.8</li>\n<li>Rails 6.0.2</li>\n<li>PostgresQL 11.6</li>\n</ul>\n<h2 id=\"getting-started\">\n  <a href=\"#getting-started\">\n    Getting Started\n  </a>\n</h2>\n<p>If you don’t want any explanations, skip to the <a href=\"#i-know-what-im-doing\">I know what I’m doing</a>\nsection of this post.</p>\n<p>Alright first lets create our directory where we want the Rails app. I\nnamed mine <code class=\"language-text\">getting-started-with-rails-6</code></p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"36818045781208200000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`mkdir getting-started-with-rails-6\ncd getting-started-with-rails-6`, `36818045781208200000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> getting-started-with-rails-6\n<span class=\"token builtin class-name\">cd</span> getting-started-with-rails-6</code></pre></div>\n<h3 id=\"adding-a-dockerfile\">\n  <a href=\"#adding-a-dockerfile\">Adding a Dockerfile</a>\n</h3>\n<p>The next step is to create our <code class=\"language-text\">Dockerfile</code>.\nThe below <code class=\"language-text\">Dockerfile</code> is modified from the <a href=\"https://docs.docker.com/compose/rails/\">Docker Quickstart\nRails</a></p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"75573755903255330000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# Dockerfile\n\n# Pre setup stuff\nFROM ruby:2.5.8 as builder\n\n# Add Yarn to the repository\nRUN curl https://deb.nodesource.com/setup_12.x | bash     && curl https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -     && echo &quot;deb https://dl.yarnpkg.com/debian/ stable main&quot; | tee /etc/apt/sources.list.d/yarn.list\n\n# Install system dependencies & clean them up\nRUN apt-get update -qq && apt-get install -y \\\n    postgresql-client build-essential yarn nodejs \\\n    libnotify-dev && \\\n    rm -rf /var/lib/apt/lists/*\n\n# This is where we build the rails app\nFROM builder as rails-app\n\n# Allow access to port 3000\nEXPOSE 3000\nEXPOSE 3035\n\n# This is to fix an issue on Linux with permissions issues\nARG USER_ID=1000\nARG GROUP_ID=1000\nARG APP_DIR=/home/user/myapp\n\n# Create a non-root user\nRUN groupadd --gid \\$GROUP_ID user\nRUN useradd --no-log-init --uid \\$USER_ID --gid \\$GROUP_ID user --create-home\n\n# Remove existing running server\nCOPY entrypoint.sh /usr/bin/\nRUN chmod +x /usr/bin/entrypoint.sh\n\n# Permissions crap\nRUN mkdir -p \\$APP_DIR\nRUN chown -R \\$USER_ID:\\$GROUP_ID \\$APP_DIR\n\n\n# Define the user running the container\nUSER \\$USER_ID:\\$GROUP_ID\n\nWORKDIR \\$APP_DIR\n\n# Install rails related dependencies\nCOPY --chown=\\$USER_ID:\\$GROUP_ID Gemfile* \\$APP_DIR/\n\n# For webpacker / node_modules\nCOPY --chown=\\$USER_ID:\\$GROUP_ID package.json \\$APP_DIR\nCOPY --chown=\\$USER_ID:\\$GROUP_ID yarn.lock \\$APP_DIR\n\nRUN bundle install\n\n# Copy over all files\nCOPY --chown=\\$USER_ID:\\$GROUP_ID . .\n\nRUN yarn install --check-files\n\n\nENTRYPOINT [&quot;/usr/bin/entrypoint.sh&quot;]\n\n# Start the main process.\nCMD [&quot;rails&quot;, &quot;server&quot;, &quot;-b&quot;, &quot;0.0.0.0&quot;]`, `75573755903255330000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># Dockerfile</span>\n\n<span class=\"token comment\"># Pre setup stuff</span>\nFROM ruby<span class=\"token punctuation\">:</span>2.5.8 as builder\n\n<span class=\"token comment\"># Add Yarn to the repository</span>\nRUN curl https<span class=\"token punctuation\">:</span>//deb.nodesource.com/setup_12.x <span class=\"token punctuation\">|</span> bash     &amp;&amp; curl https<span class=\"token punctuation\">:</span>//dl.yarnpkg.com/debian/pubkey.gpg <span class=\"token punctuation\">|</span> apt<span class=\"token punctuation\">-</span>key add <span class=\"token punctuation\">-</span>     &amp;&amp; echo \"deb https<span class=\"token punctuation\">:</span>//dl.yarnpkg.com/debian/ stable main\" <span class=\"token punctuation\">|</span> tee /etc/apt/sources.list.d/yarn.list\n\n<span class=\"token comment\"># Install system dependencies &amp; clean them up</span>\nRUN apt<span class=\"token punctuation\">-</span>get update <span class=\"token punctuation\">-</span>qq &amp;&amp; apt<span class=\"token punctuation\">-</span>get install <span class=\"token punctuation\">-</span>y \\\n    postgresql<span class=\"token punctuation\">-</span>client build<span class=\"token punctuation\">-</span>essential yarn nodejs \\\n    libnotify<span class=\"token punctuation\">-</span>dev &amp;&amp; \\\n    rm <span class=\"token punctuation\">-</span>rf /var/lib/apt/lists/*\n\n<span class=\"token comment\"># This is where we build the rails app</span>\nFROM builder as rails<span class=\"token punctuation\">-</span>app\n\n<span class=\"token comment\"># Allow access to port 3000</span>\nEXPOSE 3000\nEXPOSE 3035\n\n<span class=\"token comment\"># This is to fix an issue on Linux with permissions issues</span>\nARG USER_ID=1000\nARG GROUP_ID=1000\nARG APP_DIR=/home/user/myapp\n\n<span class=\"token comment\"># Create a non-root user</span>\nRUN groupadd <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>gid $GROUP_ID user\nRUN useradd <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>no<span class=\"token punctuation\">-</span>log<span class=\"token punctuation\">-</span>init <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>uid $USER_ID <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>gid $GROUP_ID user <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>create<span class=\"token punctuation\">-</span>home\n\n<span class=\"token comment\"># Remove existing running server</span>\nCOPY entrypoint.sh /usr/bin/\nRUN chmod +x /usr/bin/entrypoint.sh\n\n<span class=\"token comment\"># Permissions crap</span>\nRUN mkdir <span class=\"token punctuation\">-</span>p $APP_DIR\nRUN chown <span class=\"token punctuation\">-</span>R $USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID $APP_DIR\n\n\n<span class=\"token comment\"># Define the user running the container</span>\nUSER $USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID\n\nWORKDIR $APP_DIR\n\n<span class=\"token comment\"># Install rails related dependencies</span>\nCOPY <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID Gemfile* $APP_DIR/\n\n<span class=\"token comment\"># For webpacker / node_modules</span>\nCOPY <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID package.json $APP_DIR\nCOPY <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID yarn.lock $APP_DIR\n\nRUN bundle install\n\n<span class=\"token comment\"># Copy over all files</span>\nCOPY <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID . .\n\nRUN yarn install <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>check<span class=\"token punctuation\">-</span>files\n\n\nENTRYPOINT <span class=\"token punctuation\">[</span><span class=\"token string\">\"/usr/bin/entrypoint.sh\"</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># Start the main process.</span>\nCMD <span class=\"token punctuation\">[</span><span class=\"token string\">\"rails\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"server\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-b\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0.0.0.0\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-rails-6/blob/prior-to-rails-new/Dockerfile\">Reference File on\nGithub</a></p>\n<h3 id=\"adding-a-gemfile\">\n  <a href=\"#adding-a-gemfile\">\n    Adding a Gemfile\n  </a>\n</h3>\n<p>Next we will deviate slightly from the above Docker quickstart. Instead\nof using Rails 5 we’ll use Rails 6.</p>\n<p>Create a <code class=\"language-text\">Gemfile</code> with the following contents:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"41124426850409890000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# Gemfile\nsource 'https://rubygems.org'\ngem 'rails', '~> 6'`, `41124426850409890000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># Gemfile</span>\nsource <span class=\"token string\">'https://rubygems.org'</span>\ngem <span class=\"token string\">'rails'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'~> 6'</span></code></pre></div>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-rails-6/blob/prior-to-rails-new/Gemfile\">Reference File on Github</a></p>\n<p>Then add an empty <code class=\"language-text\">Gemfile.lock</code></p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"35670835506767260000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`touch Gemfile.lock`, `35670835506767260000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">touch</span> Gemfile.lock</code></pre></div>\n<h3 id=\"adding-a-package-json\">\n  <a href=\"#adding-a-package-json\">\n    Adding a package.json\n  </a>\n</h3>\n<p>There are a few options to generate your <code class=\"language-text\">package.json</code> so lets keep it\nsimple, create a file with the following settings:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"45220655154070260000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`{\n  &quot;_filename&quot;: &quot;package.json&quot;,\n  &quot;name&quot;: &quot;myapp&quot;,\n  &quot;private&quot;: true,\n  &quot;version&quot;: &quot;0.1.0&quot;\n}`, `45220655154070260000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"_filename\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"package.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"myapp\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.1.0\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-rails-6/blob/prior-to-rails-new/package.json\">Reference File on\nGithub</a></p>\n<p>Also, add an empty <code class=\"language-text\">yarn.lock</code> because Rails uses yarn by default.</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"44613042779585290000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`touch yarn.lock`, `44613042779585290000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">touch</span> yarn.lock</code></pre></div>\n<h3 id=\"adding-entrypoint-sh\">\n  <a href=\"#adding-entrypoint-sh\">\n    Adding entrypoint.sh\n  </a>\n</h3>\n<p>Now lets create an <code class=\"language-text\">entrypoint.sh</code> script to fix a server issue with\nRails.</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"32965413232173390000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`#!/bin/bash\n# entrypoint.sh\n\nset -e\n\n# Remove a potentially pre-existing server.pid for Rails.\nrm -f /myapp/tmp/pids/server.pid\n\n# Then exec the container's main process (what's set as CMD in the Dockerfile).\nexec &quot;\\$@&quot;`, `32965413232173390000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token comment\"># entrypoint.sh</span>\n\n<span class=\"token builtin class-name\">set</span> -e\n\n<span class=\"token comment\"># Remove a potentially pre-existing server.pid for Rails.</span>\n<span class=\"token function\">rm</span> -f /myapp/tmp/pids/server.pid\n\n<span class=\"token comment\"># Then exec the container's main process (what's set as CMD in the Dockerfile).</span>\n<span class=\"token builtin class-name\">exec</span> <span class=\"token string\">\"<span class=\"token variable\">$@</span>\"</span></code></pre></div>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-rails-6/blob/prior-to-rails-new/entrypoint.sh\">Reference File on\nGithub</a></p>\n<h3 id=\"adding-docker-compose-yml\">\n  <a href=\"#adding-docker-compose-yml\">\n    Adding docker-compose.yml\n  </a>\n</h3>\n<p>Finally, lets add a <code class=\"language-text\">docker-compose.yml</code> with the following content:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"82108982539881640000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# docker-compose.yml\n\nversion: &quot;3&quot;\n\nservices:\n  web:\n    environment:\n      NODE_ENV: development\n      RAILS_ENV: development\n      WEBPACKER_DEV_SERVER_HOST: 0.0.0.0\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: example\n\n    build:\n      context: .\n      args:\n        USER_ID: 1000\n        GROUP_ID: 1000\n        APP_DIR: /home/user/myapp\n\n    command: bash -c &quot;rm -f tmp/pids/server.pid &&\n      ./bin/webpack-dev-server &\n      bundle exec rails server -p 3000 -b '0.0.0.0'&quot;\n\n    volumes:\n      # make sure this lines up with APP_DIR above\n      - .:/home/user/myapp\n\n    ports:\n      - &quot;3000:3000&quot;\n      - &quot;3035:3035&quot;\n\n    depends_on:\n      - db\n\n  db:\n    image: postgres:12.2\n    environment:\n      POSTGRES_PASSWORD: example\n    volumes:\n      - db_data:/var/lib/postgresql/data\n\nvolumes:\n  db_data:`, `82108982539881640000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># docker-compose.yml</span>\n\n<span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">NODE_ENV</span><span class=\"token punctuation\">:</span> development\n      <span class=\"token key atrule\">RAILS_ENV</span><span class=\"token punctuation\">:</span> development\n      <span class=\"token key atrule\">WEBPACKER_DEV_SERVER_HOST</span><span class=\"token punctuation\">:</span> 0.0.0.0\n      <span class=\"token key atrule\">POSTGRES_USER</span><span class=\"token punctuation\">:</span> postgres\n      <span class=\"token key atrule\">POSTGRES_PASSWORD</span><span class=\"token punctuation\">:</span> example\n\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">context</span><span class=\"token punctuation\">:</span> .\n      <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">USER_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>\n        <span class=\"token key atrule\">GROUP_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>\n        <span class=\"token key atrule\">APP_DIR</span><span class=\"token punctuation\">:</span> /home/user/myapp\n\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> bash <span class=\"token punctuation\">-</span>c \"rm <span class=\"token punctuation\">-</span>f tmp/pids/server.pid &amp;&amp;\n      ./bin/webpack<span class=\"token punctuation\">-</span>dev<span class=\"token punctuation\">-</span>server &amp;\n      bundle exec rails server <span class=\"token punctuation\">-</span>p 3000 <span class=\"token punctuation\">-</span>b '0.0.0.0'\"\n\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># make sure this lines up with APP_DIR above</span>\n      <span class=\"token punctuation\">-</span> .<span class=\"token punctuation\">:</span>/home/user/myapp\n\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"3000:3000\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"3035:3035\"</span>\n\n    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> db\n\n  <span class=\"token key atrule\">db</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> postgres<span class=\"token punctuation\">:</span><span class=\"token number\">12.2</span>\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">POSTGRES_PASSWORD</span><span class=\"token punctuation\">:</span> example\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> db_data<span class=\"token punctuation\">:</span>/var/lib/postgresql/data\n\n<span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n  db_data<span class=\"token punctuation\">:</span></code></pre></div>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-rails-6/blob/prior-to-rails-new/docker-compose.yml\">Reference File on\nGithub</a></p>\n<h3 id=\"adding-a-dot-docker-ignore-file\">\n  <a href=\"#adding-a-dot-docker-ignore-file\">\n    Adding a .dockerignore file\n  </a>\n</h3>\n<p>Finally, its good practice to add a <code class=\"language-text\">.dockerignore</code> file. The\n<code class=\"language-text\">.dockerignore</code> is very similar to <code class=\"language-text\">.gitignore</code> and this one will very\nclosely resemble your <code class=\"language-text\">.gitignore</code> that Rails will generate.</p>\n<p>Create a <code class=\"language-text\">.dockerignore</code> file with the following contents:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"88076509562634260000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# .dockerignore\n\n# Ignore bundler config.\n/.bundle\n\n# Ignore all logfiles and tempfiles.\n/log/*\n/tmp/*\n!/log/.keep\n!/tmp/.keep\n\n# Ignore pidfiles, but keep the directory.\n/tmp/pids/*\n!/tmp/pids/\n!/tmp/pids/.keep\n\n# Ignore uploaded files in development.\n/storage/*\n!/storage/.keep\n\n/public/assets\n.byebug_history\n\n# Ignore master key for decrypting credentials and more.\n/config/master.key\n\n/public/packs\n/public/packs-test\n/node_modules\n/yarn-error.log\nyarn-debug.log*`, `88076509562634260000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># .dockerignore</span>\n\n<span class=\"token comment\"># Ignore bundler config.</span>\n/.bundle\n\n<span class=\"token comment\"># Ignore all logfiles and tempfiles.</span>\n/log/*\n/tmp/*\n<span class=\"token operator\">!</span>/log/.keep\n<span class=\"token operator\">!</span>/tmp/.keep\n\n<span class=\"token comment\"># Ignore pidfiles, but keep the directory.</span>\n/tmp/pids/*\n<span class=\"token operator\">!</span>/tmp/pids/\n<span class=\"token operator\">!</span>/tmp/pids/.keep\n\n<span class=\"token comment\"># Ignore uploaded files in development.</span>\n/storage/*\n<span class=\"token operator\">!</span>/storage/.keep\n\n/public/assets\n.byebug_history\n\n<span class=\"token comment\"># Ignore master key for decrypting credentials and more.</span>\n/config/master.key\n\n/public/packs\n/public/packs-test\n/node_modules\n/yarn-error.log\nyarn-debug.log*</code></pre></div>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-rails-6/blob/prior-to-rails-new/.dockerignore\">Reference File on\nGithub</a></p>\n<h3 id=\"prebuild-directory-structure\">\n  <a href=\"#prebuild-directory-structure\">\n    Prebuild Directory Structure\n  </a>\n</h3>\n<p>Your directory should look as follows:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"40787355663552406000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`.\n├── docker-compose.yml\n├── .dockerignore\n├── Dockerfile\n├── entrypoint.sh\n├── Gemfile\n├── Gemfile.lock\n├── package.json\n└── yarn.lock`, `40787355663552406000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">.</span>\n├── docker-compose.yml\n├── .dockerignore\n├── Dockerfile\n├── entrypoint.sh\n├── Gemfile\n├── Gemfile.lock\n├── package.json\n└── yarn.lock</code></pre></div>\n<p>For reference, I have created a Github branch to represent the file\nstructure.</p>\n<h3 style=\"margin-top: 0\" id=\"prebuild-reference-repository\">\n  <a href=\"https://github.com/ParamagicDev/getting-started-with-rails-6/tree/prior-to-rails-new\">\n    Prebuild Reference Repository Branch\n  </a>\n</h3>\n<br />\n<h2 id=\"building-the-project\">\n  <a href=\"#building-the-project\">\n    Building the Project\n  </a>\n</h2>\n<h3 id=\"create-the-rails-app\">\n  <a href=\"create-the-rails-app\">\n    Create the Rails app\n  </a>\n</h3>\n<p>Prior to building the docker container, you have to create the Rails app\nstructure. To do so, run the command below inside of your Rails project\ndirectory.</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"29459777703647896000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose run --rm --no-deps web rails new . --force --no-deps --database=postgresql`, `29459777703647896000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run --rm --no-deps web rails new <span class=\"token builtin class-name\">.</span> --force --no-deps --database<span class=\"token operator\">=</span>postgresql</code></pre></div>\n<p>This will build a fresh Rails project for you using <code class=\"language-text\">PostgresQL</code> as the\ndatabase adapter.</p>\n<h3 id=\"postbuild-directory-structure\">\n  <a href=\"#postbuild-directory-structure\">\n    Postbuild Directory Structure\n  </a>\n</h3>\n<p>Your Rails directory should look as follows:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"15483126174764884000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`.\n├── app\n├── babel.config.js\n├── bin\n├── .browserslistrc\n├── config\n├── config.ru\n├── docker-compose.yml\n├── .dockerignore\n├── Dockerfile\n├── entrypoint.sh\n├── Gemfile\n├── Gemfile.lock\n├── .git\n├── .gitignore\n├── lib\n├── log\n├── package.json\n├── postcss.config.js\n├── public\n├── Rakefile\n├── README.md\n├── .ruby-version\n├── storage\n├── test\n├── tmp\n├── vendor\n└── yarn.lock`, `15483126174764884000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">.</span>\n├── app\n├── babel.config.js\n├── bin\n├── .browserslistrc\n├── config\n├── config.ru\n├── docker-compose.yml\n├── .dockerignore\n├── Dockerfile\n├── entrypoint.sh\n├── Gemfile\n├── Gemfile.lock\n├── .git\n├── .gitignore\n├── lib\n├── log\n├── package.json\n├── postcss.config.js\n├── public\n├── Rakefile\n├── README.md\n├── .ruby-version\n├── storage\n├── <span class=\"token builtin class-name\">test</span>\n├── tmp\n├── vendor\n└── yarn.lock</code></pre></div>\n<h3 style=\"margin-top: 0\" id=\"postbuild-reference-repository\">\n  <a href=\"https://github.com/ParamagicDev/getting-started-with-rails-6/tree/before-making-blog\">\n    Directory Structure after Rails new\n  </a>\n</h3>\n<h4 id=\"ownership-issues\">\n  <a href=\"#ownership-issues\">\n    Ownership Issues\n  </a>\n</h4>\n<p>You may run into ownership issues on Linux. I did my best to fix this.\nIn case anything still lingers, run the following:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"72045646776059355000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`sudo chown -R &quot;\\$USER&quot;:&quot;\\$USER&quot; .`, `72045646776059355000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R <span class=\"token string\">\"<span class=\"token environment constant\">$USER</span>\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"<span class=\"token environment constant\">$USER</span>\"</span> <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p>And if you’re feeling real crazy, you can setup an <code class=\"language-text\">alias</code> for this\ncommand. I have mine called <code class=\"language-text\">ownthis</code></p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"40069304222740840000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`alias ownthis=&quot;sudo chown -R \\$USER:\\$USER .&quot;`, `40069304222740840000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">ownthis</span><span class=\"token operator\">=</span><span class=\"token string\">\"sudo chown -R <span class=\"token environment constant\">$USER</span>:<span class=\"token environment constant\">$USER</span> .\"</span></code></pre></div>\n<h3 id=\"connecting-the-database\">\n  <a href=\"#connecting-the-database\">\n    Connecting the Database\n  </a>\n</h3>\n<p>In order to connect the Database to Rails, you have to tell Rails where\nto find the database. To do so, navigate to your <code class=\"language-text\">config/database.yml</code>\nfile.</p>\n<p>Delete the contents of your <code class=\"language-text\">config/database.yml</code> and add the following:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"38670862538745740000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# config/database.yml\n\ndefault: &default\n  adapter: postgresql\n  encoding: unicode\n  host: db\n  username: <%= ENV['POSTGRES_USER'] %>\n  password: <%= ENV['POSTGRES_PASSWORD'] %>\n  pool: 5\n\ndevelopment:\n  <<: *default\n  database: myapp_development\n\ntest:\n  <<: *default\n  database: myapp_test`, `38670862538745740000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># config/database.yml</span>\n\n<span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span> <span class=\"token important\">&amp;default</span>\n  <span class=\"token key atrule\">adapter</span><span class=\"token punctuation\">:</span> postgresql\n  <span class=\"token key atrule\">encoding</span><span class=\"token punctuation\">:</span> unicode\n  <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> db\n  <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> &lt;%= ENV<span class=\"token punctuation\">[</span><span class=\"token string\">'POSTGRES_USER'</span><span class=\"token punctuation\">]</span> %<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> &lt;%= ENV<span class=\"token punctuation\">[</span><span class=\"token string\">'POSTGRES_PASSWORD'</span><span class=\"token punctuation\">]</span> %<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">pool</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n\n<span class=\"token key atrule\">development</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">&lt;&lt;</span><span class=\"token punctuation\">:</span> <span class=\"token important\">*default</span>\n  <span class=\"token key atrule\">database</span><span class=\"token punctuation\">:</span> myapp_development\n\n<span class=\"token key atrule\">test</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">&lt;&lt;</span><span class=\"token punctuation\">:</span> <span class=\"token important\">*default</span>\n  <span class=\"token key atrule\">database</span><span class=\"token punctuation\">:</span> myapp_test</code></pre></div>\n<p>Now you can boot the app using the following command:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"36167637844130420000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose up --build`, `36167637844130420000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose up --build</code></pre></div>\n<p>In another terminal, run the following commands:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"97320484998547640000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose run --rm web rails db:create\ndocker-compose run --rm web rails db:migrate`, `97320484998547640000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run --rm web rails db:create\ndocker-compose run --rm web rails db:migrate</code></pre></div>\n<p>Congratulations! You have finished the setup portion of the application!</p>\n<p>Now you should be able to view your app by navigating to:</p>\n<p><code class=\"language-text\">localhost:3000</code> in your browser’s address bar.</p>\n<p>You should see a message congratulating you for using Rails.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.75675675675676%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfUlEQVQoz32Sy07DMBBF89ss+AI+gRVigVghFbFg2cCCSqWozaMQWlQqaPNoWkKf2LEvY6cJoSmMdBR77vjGo7FRq9XgeR46nQ4sy4Jt21UcZ39e48Ah3erY+mt0u12oWC4XWK7W4Kkg0i0CjNgwDi4lGKdcDuW/KJ8KqmEMnEntY7Tbbb3gnEGQmJJRAecQpM2pZum6tJa/9RJCCn3eUK2qUJvdkFQUTWJEIx/+8A1jP9CH9wU1QMjfhiqRQ7IuEnxNyymkiCBYQrl0ayAr6JZ3byizXyHTP8EWz4gHLUyGLawSF5K9Z3p+rZ2otlyYSayiHryHFhr1M1jNGzw1LExfXdJY0eK/hj/X12OC/XiBq/tD9KI67l6Ocdk8gNM/1VpuuGtaTFlPSoiSsUBrdILbwRGSeYx+aMIOz9GLr3UXQrGtL2O4rrt3auuVGgbdnGYwm32Ab1QbGZye019hmKaJJEkQBAHCMCzwfXoqwVjnoyhCEKr9iPLjSm2Zb7UrR3u0sDhFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"You&#39;re on Rails 6\"\n        title=\"You&#39;re on Rails 6\"\n        src=\"/blog/static/11b13ba3a6b3c3f05bd4086d8b8e24aa/fcda8/youre-on-rails.png\"\n        srcset=\"/blog/static/11b13ba3a6b3c3f05bd4086d8b8e24aa/12f09/youre-on-rails.png 148w,\n/blog/static/11b13ba3a6b3c3f05bd4086d8b8e24aa/e4a3f/youre-on-rails.png 295w,\n/blog/static/11b13ba3a6b3c3f05bd4086d8b8e24aa/fcda8/youre-on-rails.png 590w,\n/blog/static/11b13ba3a6b3c3f05bd4086d8b8e24aa/efc66/youre-on-rails.png 885w,\n/blog/static/11b13ba3a6b3c3f05bd4086d8b8e24aa/c83ae/youre-on-rails.png 1180w,\n/blog/static/11b13ba3a6b3c3f05bd4086d8b8e24aa/e67a8/youre-on-rails.png 1740w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h3 style=\"margin-top: 0;\" id=\"prior-to-adding-functionality-branch\">\n  <a href=\"https://github.com/ParamagicDev/getting-started-with-rails-6/tree/prior-to-adding-stuff\">\n    Github Branch Prior to adding additional functionality\n  </a>\n<h3>\n<h2 id=\"using-docker\">\n  <a href=\"#using-docker\">\n    Using Docker\n  </a>\n</h2>\n<h3 id=\"stopping-the-application\">\n  <a href=\"#stopping-the-application\">\n    Stopping the application\n  </a>\n</h3>\n<p>To stop the application, in another terminal simply run:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"28594485407538530000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose down`, `28594485407538530000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose down</code></pre></div>\n<h3 id=\"starting-the-application\">\n  <a href=\"#starting-the-application\">\n    Starting the application\n  </a>\n</h3>\n<p>To start the application there are two methods.</p>\n<p>If you have added anything to the <code class=\"language-text\">Gemfile</code>, in order to sync the\nchanges, you must run the following:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"523503961385984900\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose run web bundle install\ndocker-compose up --build`, `523503961385984900`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run web bundle <span class=\"token function\">install</span>\ndocker-compose up --build</code></pre></div>\n<p>If you have not changed anything <code class=\"language-text\">Gemfile</code> related but you may have\nchanged the <code class=\"language-text\">docker-compose.yml</code> file, you can simply run:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"93819925621202080000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose up --build`, `93819925621202080000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose up --build</code></pre></div>\n<p>However, if you do not need to rebuild, you can simply run:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"75579909354075550000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose up`, `75579909354075550000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose up</code></pre></div>\n<h2 id=\"extra-tips\">\n  <a href=\"#extra-tips\">\n    Extra Tips\n  </a>\n</h2>\n<p>As a simple way to get you going, anytime you see</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"1348403639846718000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`rails [command]`, `1348403639846718000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">rails <span class=\"token punctuation\">[</span>command<span class=\"token punctuation\">]</span></code></pre></div>\n<p>simply prepend the following:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"10723914403195468000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose run --rm web rails [command]`, `10723914403195468000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run --rm web rails <span class=\"token punctuation\">[</span>command<span class=\"token punctuation\">]</span></code></pre></div>\n<p><code class=\"language-text\">docker-compose exec</code> is to be run if you have a container already\nrunning.</p>\n<p><code class=\"language-text\">docker-compose run</code> is to be run if you do not have a container\nrunning.</p>\n<p><code class=\"language-text\">docker-compose run --rm</code> will automatically remove the docker instance\nonce the command finished</p>\n<h2 id=\"useful-commands\">\n  <a href=\"#useful-commands\">\n    Useful Commands\n  </a>\n</h2>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"89386067304860810000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# builds a container\ndocker-compose build\n\n# starts a container thats been built (equivalent to \\`rails server\\`)\ndocker-compose up\n\n# starts and builds a container\ndocker-compose up --build\n\n# runs a one-off instance\ndocker-compose run --rm web [command]\n\n# runs a command inside of a running container\n# \\`docker-compose up\\` needs to be running in another terminal\ndocker-compose exec web [command]\n\n# stops the application\ndocker-compose down\n\n# Remove orphaned containers as well\ndocker-compose down --remove-orphans\n\n# run a bash instance inside of the docker-compose container\n# now you can simply run commands like \\`rails db:migrate\\` without\n# adding \\`docker-compose run web\\` before every command\ndocker-compose run --rm web /bin/bash\n\n# Things are totally jacked up? Remove all images and containers.\n# https://stackoverflow.com/a/52179797\n\ndocker rm \\$(docker ps -q -a) -f && docker rmi \\$(docker images -q) -f`, `89386067304860810000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># builds a container</span>\ndocker-compose build\n\n<span class=\"token comment\"># starts a container thats been built (equivalent to `rails server`)</span>\ndocker-compose up\n\n<span class=\"token comment\"># starts and builds a container</span>\ndocker-compose up --build\n\n<span class=\"token comment\"># runs a one-off instance</span>\ndocker-compose run --rm web <span class=\"token punctuation\">[</span>command<span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># runs a command inside of a running container</span>\n<span class=\"token comment\"># `docker-compose up` needs to be running in another terminal</span>\ndocker-compose <span class=\"token builtin class-name\">exec</span> web <span class=\"token punctuation\">[</span>command<span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># stops the application</span>\ndocker-compose down\n\n<span class=\"token comment\"># Remove orphaned containers as well</span>\ndocker-compose down --remove-orphans\n\n<span class=\"token comment\"># run a bash instance inside of the docker-compose container</span>\n<span class=\"token comment\"># now you can simply run commands like `rails db:migrate` without</span>\n<span class=\"token comment\"># adding `docker-compose run web` before every command</span>\ndocker-compose run --rm web /bin/bash\n\n<span class=\"token comment\"># Things are totally jacked up? Remove all images and containers.</span>\n<span class=\"token comment\"># https://stackoverflow.com/a/52179797</span>\n\ndocker <span class=\"token function\">rm</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>docker <span class=\"token function\">ps</span> -q -a<span class=\"token variable\">)</span></span> -f <span class=\"token operator\">&amp;&amp;</span> docker rmi <span class=\"token variable\"><span class=\"token variable\">$(</span>docker images -q<span class=\"token variable\">)</span></span> -f</code></pre></div>\n<h2 id=\"adding-additional-functionality\">\n  <a href=\"#adding-additional-functionality\">\n    Adding additional functionality\n  </a>\n</h2>\n<p>In an effort to keep this blog post semi-short in length, I will refer\nyou to the Rails guide for this part as nothing will be different. Once\nyou’re finished going through the Rails guide, come back here and we\nwill deploy to Heroku!</p>\n<p><a href=\"https://guides.rubyonrails.org/getting_started.html#say-hello-rails\">Ruby on Rails Guide to Getting\nStarted</a></p>\n<p>You can skip to section 4.2 because everything prior to that we have\njust done above.</p>\n<h2 id=\"deployment\">\n  <a href=\"#deployment\">\n    Deployment to Heroku\n  </a>\n</h2>\n<p>First, lets create a Heroku account. To do so, head on over to their\nsignup page.</p>\n<p><a href=\"https://signup.heroku.com/\">https://signup.heroku.com/</a></p>\n<p>After creating an account, install the Heroku CLI.</p>\n<p><a href=\"https://devcenter.heroku.com/articles/heroku-cli#download-and-install\">Installation instructions can be found\nhere.</a></p>\n<p>Now that you have Heroku CLI installed you can login via terminal.</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"96786723275641300000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`heroku login\n# heroku: Enter your Heroku credentials\n# Email: schneems@example.com\n# Password:\n# Could not find an existing public key.\n# Would you like to generate one? [Yn]\n# Generating new SSH public key.\n# Uploading ssh public key /Users/adam/.ssh/id_rsa.pub`, `96786723275641300000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">heroku login\n<span class=\"token comment\"># heroku: Enter your Heroku credentials</span>\n<span class=\"token comment\"># Email: schneems@example.com</span>\n<span class=\"token comment\"># Password:</span>\n<span class=\"token comment\"># Could not find an existing public key.</span>\n<span class=\"token comment\"># Would you like to generate one? [Yn]</span>\n<span class=\"token comment\"># Generating new SSH public key.</span>\n<span class=\"token comment\"># Uploading ssh public key /Users/adam/.ssh/id_rsa.pub</span></code></pre></div>\n<p>After you have logged in, you can now create a Heroku <code class=\"language-text\">dyno</code>. Basically\nwhat this means is they will provision a server for you to host your\nsite. To do this, simply run the following:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"61679011957456085000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`heroku apps:create <Your-app-name>\n# Creating ⬢ <Your-app-name>... done\n# https://<Your-app-name>.herokuapp.com/ |\nhttps://git.heroku.com/<Your-app-name>.git`, `61679011957456085000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">heroku apps:create <span class=\"token operator\">&lt;</span>Your-app-name<span class=\"token operator\">></span>\n<span class=\"token comment\"># Creating ⬢ &lt;Your-app-name>... done</span>\n<span class=\"token comment\"># https://&lt;Your-app-name>.herokuapp.com/ |</span>\nhttps://git.heroku.com/<span class=\"token operator\">&lt;</span>Your-app-name<span class=\"token operator\">></span>.git</code></pre></div>\n<p>Now deployment is as simple as:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"73334439916583800000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`git push heroku master`, `73334439916583800000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> push heroku master</code></pre></div>\n<p>After waiting a little bit you should see something like the following:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"47712315401126126000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`remote: -----> Launching...\nremote:        Released v6\nremote:        https://<Your-app-name>.herokuapp.com/ deployed to Heroku`, `47712315401126126000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">remote: -----<span class=\"token operator\">></span> Launching<span class=\"token punctuation\">..</span>.\nremote:        Released v6\nremote:        https://<span class=\"token operator\">&lt;</span>Your-app-name<span class=\"token operator\">></span>.herokuapp.com/ deployed to Heroku</code></pre></div>\n<p>To visit your site, simply run:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"51029303579645900000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`heroku open`, `51029303579645900000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">heroku <span class=\"token function\">open</span></code></pre></div>\n<p>However, youre not done yet! If you got to your site and go visit the\n<code class=\"language-text\">/articles</code> section, you will run into an error. This is because you\nhave not migrated the database on Heroku. To do so, run the following:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"17688892799049505000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`heroku run rails db:migrate`, `17688892799049505000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">heroku run rails db:migrate</code></pre></div>\n<p>Now you’re done! Good luck with everything and I hope this was helpful!</p>\n<p><a href=\"#links\">Helpful Links below</a></p>\n<h2 id=\"issues\">\n  <a href=\"#issues\">\n    Issues\n  </a>\n</h2>\n<p>Problems with ownership?</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"33331412276148933000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`sudo chown -R &quot;\\$USER&quot;:&quot;\\$USER&quot; .`, `33331412276148933000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R <span class=\"token string\">\"<span class=\"token environment constant\">$USER</span>\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"<span class=\"token environment constant\">$USER</span>\"</span> <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p>Things not working as expected?</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"56037611828757864000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose down --remove-orphans\ndocker-compose up --build`, `56037611828757864000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose down --remove-orphans\ndocker-compose up --build</code></pre></div>\n<p>Tired of the <code class=\"language-text\">yarn install --check-files</code> issues?\nDisable it!</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"43531262107501625000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# config/webpacker.yml\n\n# ...\ncheck_yarn_integrity: false\n# ...`, `43531262107501625000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># config/webpacker.yml</span>\n\n<span class=\"token comment\"># ...</span>\n<span class=\"token key atrule\">check_yarn_integrity</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n<span class=\"token comment\"># ...</span></code></pre></div>\n<p>Alternatively, run the following to fix this issue:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"14682516501935706000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose run --rm web yarn install --check-files`, `14682516501935706000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run --rm web <span class=\"token function\">yarn</span> <span class=\"token function\">install</span> --check-files</code></pre></div>\n<p>No space left on device??</p>\n<p><a href=\"https://success.docker.com/article/error-message-no-space-left-on-device-in-default-machine\">https://success.docker.com/article/error-message-no-space-left-on-device-in-default-machine</a></p>\n<br />\n<p>Postgres not updating a new name / passsword? You must first delete its\nvolume to tell postgres to rebuild it.</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"44423267392808665000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker volume ls # lists the volumes\ndocker volume rm <volume-name> # removes the volume\ndocker volume prune [--force] # remove all unused volumes`, `44423267392808665000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker volume <span class=\"token function\">ls</span> <span class=\"token comment\"># lists the volumes</span>\ndocker volume <span class=\"token function\">rm</span> <span class=\"token operator\">&lt;</span>volume-name<span class=\"token operator\">></span> <span class=\"token comment\"># removes the volume</span>\ndocker volume prune <span class=\"token punctuation\">[</span>--force<span class=\"token punctuation\">]</span> <span class=\"token comment\"># remove all unused volumes</span></code></pre></div>\n<h2 id=\"i-know-what-im-doing\">\n  <a href=\"#i-know-what-im-doing\">\n    I know what I'm doing.\n  </a>\n</h2>\n<p>This section is meant to be the TLDR version of the above.\nThis will move quickly and is meant more as a reference.\nTo skip this section, click on the below link:</p>\n<p><a href=\"#links\">Links sections</a></p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"3636053416824558600\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`mkdir -p new-rails-app\ncd new-rails-app\ntouch Dockerfile docker-compose.yml entrypoint.sh \\\n      Gemfile Gemfile.lock yarn.lock package.json \\\n      .dockerignore`, `3636053416824558600`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p new-rails-app\n<span class=\"token builtin class-name\">cd</span> new-rails-app\n<span class=\"token function\">touch</span> Dockerfile docker-compose.yml entrypoint.sh <span class=\"token punctuation\">\\</span>\n      Gemfile Gemfile.lock yarn.lock package.json <span class=\"token punctuation\">\\</span>\n      .dockerignore</code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"89893985881768020000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# Dockerfile\n\n# Pre setup stuff\nFROM ruby:2.5.8 as builder\n\n# Add Yarn to the repository\nRUN curl https://deb.nodesource.com/setup_12.x | bash     && curl https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -     && echo &quot;deb https://dl.yarnpkg.com/debian/ stable main&quot; | tee /etc/apt/sources.list.d/yarn.list\n\n# Install system dependencies & clean them up\nRUN apt-get update -qq && apt-get install -y \\\n    postgresql-client build-essential yarn nodejs \\\n    libnotify-dev && \\\n    rm -rf /var/lib/apt/lists/*\n\n# This is where we build the rails app\nFROM builder as rails-app\n\n# Allow access to port 3000\nEXPOSE 3000\nEXPOSE 3035\n\n# This is to fix an issue on Linux with permissions issues\nARG USER_ID=1000\nARG GROUP_ID=1000\nARG APP_DIR=/home/user/myapp\n\n# Create a non-root user\nRUN groupadd --gid \\$GROUP_ID user\nRUN useradd --no-log-init --uid \\$USER_ID --gid \\$GROUP_ID user --create-home\n\n# Remove existing running server\nCOPY entrypoint.sh /usr/bin/\nRUN chmod +x /usr/bin/entrypoint.sh\n\n# Permissions crap\nRUN mkdir -p \\$APP_DIR\nRUN chown -R \\$USER_ID:\\$GROUP_ID \\$APP_DIR\n\n\n# Define the user running the container\nUSER \\$USER_ID:\\$GROUP_ID\n\nWORKDIR \\$APP_DIR\n\n# Install rails related dependencies\nCOPY --chown=\\$USER_ID:\\$GROUP_ID Gemfile* \\$APP_DIR/\n\n# For webpacker / node_modules\nCOPY --chown=\\$USER_ID:\\$GROUP_ID package.json \\$APP_DIR\nCOPY --chown=\\$USER_ID:\\$GROUP_ID yarn.lock \\$APP_DIR\n\nRUN bundle install\n\n# Copy over all files\nCOPY --chown=\\$USER_ID:\\$GROUP_ID . .\n\nRUN yarn install --check-files\n\n\nENTRYPOINT [&quot;/usr/bin/entrypoint.sh&quot;]\n\n# Start the main process.\nCMD [&quot;rails&quot;, &quot;server&quot;, &quot;-b&quot;, &quot;0.0.0.0&quot;]`, `89893985881768020000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># Dockerfile</span>\n\n<span class=\"token comment\"># Pre setup stuff</span>\nFROM ruby<span class=\"token punctuation\">:</span>2.5.8 as builder\n\n<span class=\"token comment\"># Add Yarn to the repository</span>\nRUN curl https<span class=\"token punctuation\">:</span>//deb.nodesource.com/setup_12.x <span class=\"token punctuation\">|</span> bash     &amp;&amp; curl https<span class=\"token punctuation\">:</span>//dl.yarnpkg.com/debian/pubkey.gpg <span class=\"token punctuation\">|</span> apt<span class=\"token punctuation\">-</span>key add <span class=\"token punctuation\">-</span>     &amp;&amp; echo \"deb https<span class=\"token punctuation\">:</span>//dl.yarnpkg.com/debian/ stable main\" <span class=\"token punctuation\">|</span> tee /etc/apt/sources.list.d/yarn.list\n\n<span class=\"token comment\"># Install system dependencies &amp; clean them up</span>\nRUN apt<span class=\"token punctuation\">-</span>get update <span class=\"token punctuation\">-</span>qq &amp;&amp; apt<span class=\"token punctuation\">-</span>get install <span class=\"token punctuation\">-</span>y \\\n    postgresql<span class=\"token punctuation\">-</span>client build<span class=\"token punctuation\">-</span>essential yarn nodejs \\\n    libnotify<span class=\"token punctuation\">-</span>dev &amp;&amp; \\\n    rm <span class=\"token punctuation\">-</span>rf /var/lib/apt/lists/*\n\n<span class=\"token comment\"># This is where we build the rails app</span>\nFROM builder as rails<span class=\"token punctuation\">-</span>app\n\n<span class=\"token comment\"># Allow access to port 3000</span>\nEXPOSE 3000\nEXPOSE 3035\n\n<span class=\"token comment\"># This is to fix an issue on Linux with permissions issues</span>\nARG USER_ID=1000\nARG GROUP_ID=1000\nARG APP_DIR=/home/user/myapp\n\n<span class=\"token comment\"># Create a non-root user</span>\nRUN groupadd <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>gid $GROUP_ID user\nRUN useradd <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>no<span class=\"token punctuation\">-</span>log<span class=\"token punctuation\">-</span>init <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>uid $USER_ID <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>gid $GROUP_ID user <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>create<span class=\"token punctuation\">-</span>home\n\n<span class=\"token comment\"># Remove existing running server</span>\nCOPY entrypoint.sh /usr/bin/\nRUN chmod +x /usr/bin/entrypoint.sh\n\n<span class=\"token comment\"># Permissions crap</span>\nRUN mkdir <span class=\"token punctuation\">-</span>p $APP_DIR\nRUN chown <span class=\"token punctuation\">-</span>R $USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID $APP_DIR\n\n\n<span class=\"token comment\"># Define the user running the container</span>\nUSER $USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID\n\nWORKDIR $APP_DIR\n\n<span class=\"token comment\"># Install rails related dependencies</span>\nCOPY <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID Gemfile* $APP_DIR/\n\n<span class=\"token comment\"># For webpacker / node_modules</span>\nCOPY <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID package.json $APP_DIR\nCOPY <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID yarn.lock $APP_DIR\n\nRUN bundle install\n\n<span class=\"token comment\"># Copy over all files</span>\nCOPY <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>chown=$USER_ID<span class=\"token punctuation\">:</span>$GROUP_ID . .\n\nRUN yarn install <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>check<span class=\"token punctuation\">-</span>files\n\n\nENTRYPOINT <span class=\"token punctuation\">[</span><span class=\"token string\">\"/usr/bin/entrypoint.sh\"</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># Start the main process.</span>\nCMD <span class=\"token punctuation\">[</span><span class=\"token string\">\"rails\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"server\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-b\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0.0.0.0\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"81358245480759980000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# docker-compose.yml\n\nversion: &quot;3&quot;\n\nservices:\n  web:\n    environment:\n      NODE_ENV: development\n      RAILS_ENV: development\n      WEBPACKER_DEV_SERVER_HOST: 0.0.0.0\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: example\n\n    build:\n      context: .\n      args:\n        USER_ID: 1000\n        GROUP_ID: 1000\n        APP_DIR: /home/user/myapp\n\n    command: bash -c &quot;rm -f tmp/pids/server.pid &&\n      ./bin/webpack-dev-server &\n      bundle exec rails server -p 3000 -b '0.0.0.0'&quot;\n\n    volumes:\n      # make sure this lines up with APP_DIR above\n      - .:/home/user/myapp\n\n    ports:\n      - &quot;3000:3000&quot;\n      - &quot;3035:3035&quot;\n\n    depends_on:\n      - db\n\n  db:\n    image: postgres:12.2\n    environment:\n      POSTGRES_PASSWORD: example\n    volumes:\n      - db_data:/var/lib/postgresql/data\n\nvolumes:\n  db_data:`, `81358245480759980000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># docker-compose.yml</span>\n\n<span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">NODE_ENV</span><span class=\"token punctuation\">:</span> development\n      <span class=\"token key atrule\">RAILS_ENV</span><span class=\"token punctuation\">:</span> development\n      <span class=\"token key atrule\">WEBPACKER_DEV_SERVER_HOST</span><span class=\"token punctuation\">:</span> 0.0.0.0\n      <span class=\"token key atrule\">POSTGRES_USER</span><span class=\"token punctuation\">:</span> postgres\n      <span class=\"token key atrule\">POSTGRES_PASSWORD</span><span class=\"token punctuation\">:</span> example\n\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">context</span><span class=\"token punctuation\">:</span> .\n      <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">USER_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>\n        <span class=\"token key atrule\">GROUP_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>\n        <span class=\"token key atrule\">APP_DIR</span><span class=\"token punctuation\">:</span> /home/user/myapp\n\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> bash <span class=\"token punctuation\">-</span>c \"rm <span class=\"token punctuation\">-</span>f tmp/pids/server.pid &amp;&amp;\n      ./bin/webpack<span class=\"token punctuation\">-</span>dev<span class=\"token punctuation\">-</span>server &amp;\n      bundle exec rails server <span class=\"token punctuation\">-</span>p 3000 <span class=\"token punctuation\">-</span>b '0.0.0.0'\"\n\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># make sure this lines up with APP_DIR above</span>\n      <span class=\"token punctuation\">-</span> .<span class=\"token punctuation\">:</span>/home/user/myapp\n\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"3000:3000\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"3035:3035\"</span>\n\n    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> db\n\n  <span class=\"token key atrule\">db</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> postgres<span class=\"token punctuation\">:</span><span class=\"token number\">12.2</span>\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">POSTGRES_PASSWORD</span><span class=\"token punctuation\">:</span> example\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> db_data<span class=\"token punctuation\">:</span>/var/lib/postgresql/data\n\n<span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n  db_data<span class=\"token punctuation\">:</span></code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"79300473903710130000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`#!/bin/bash\n# entrypoint.sh\n\nset -e\n\n# Remove a potentially pre-existing server.pid for Rails.\nrm -f /myapp/tmp/pids/server.pid\n\n# Then exec the container's main process (what's set as CMD in the Dockerfile).\nexec &quot;\\$@&quot;`, `79300473903710130000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token comment\"># entrypoint.sh</span>\n\n<span class=\"token builtin class-name\">set</span> -e\n\n<span class=\"token comment\"># Remove a potentially pre-existing server.pid for Rails.</span>\n<span class=\"token function\">rm</span> -f /myapp/tmp/pids/server.pid\n\n<span class=\"token comment\"># Then exec the container's main process (what's set as CMD in the Dockerfile).</span>\n<span class=\"token builtin class-name\">exec</span> <span class=\"token string\">\"<span class=\"token variable\">$@</span>\"</span></code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"38486092371296920000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# Gemfile\n\nsource 'https://rubygems.org'\ngem 'rails', '~> 6'`, `38486092371296920000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># Gemfile</span>\n\nsource <span class=\"token string\">'https://rubygems.org'</span>\ngem <span class=\"token string\">'rails'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'~> 6'</span></code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"50531090413073750000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`{\n  &quot;_filename&quot;: &quot;package.json&quot;,\n  &quot;name&quot;: &quot;myapp&quot;,\n  &quot;private&quot;: true,\n  &quot;version&quot;: &quot;1.0.0&quot;\n}`, `50531090413073750000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"_filename\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"package.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"myapp\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"75445275015889910000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# .dockerignore\n\n# .dockerignore\n\n# Ignore bundler config.\n/.bundle\n\n# Ignore all logfiles and tempfiles.\n/log/*\n/tmp/*\n!/log/.keep\n!/tmp/.keep\n\n# Ignore pidfiles, but keep the directory.\n/tmp/pids/*\n!/tmp/pids/\n!/tmp/pids/.keep\n\n# Ignore uploaded files in development.\n/storage/*\n!/storage/.keep\n\n/public/assets\n.byebug_history\n\n# Ignore master key for decrypting credentials and more.\n/config/master.key\n\n/public/packs\n/public/packs-test\n/node_modules\n/yarn-error.log\nyarn-debug.log*`, `75445275015889910000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># .dockerignore</span>\n\n<span class=\"token comment\"># .dockerignore</span>\n\n<span class=\"token comment\"># Ignore bundler config.</span>\n/.bundle\n\n<span class=\"token comment\"># Ignore all logfiles and tempfiles.</span>\n/log/*\n/tmp/*\n<span class=\"token operator\">!</span>/log/.keep\n<span class=\"token operator\">!</span>/tmp/.keep\n\n<span class=\"token comment\"># Ignore pidfiles, but keep the directory.</span>\n/tmp/pids/*\n<span class=\"token operator\">!</span>/tmp/pids/\n<span class=\"token operator\">!</span>/tmp/pids/.keep\n\n<span class=\"token comment\"># Ignore uploaded files in development.</span>\n/storage/*\n<span class=\"token operator\">!</span>/storage/.keep\n\n/public/assets\n.byebug_history\n\n<span class=\"token comment\"># Ignore master key for decrypting credentials and more.</span>\n/config/master.key\n\n/public/packs\n/public/packs-test\n/node_modules\n/yarn-error.log\nyarn-debug.log*</code></pre></div>\n<p>After setting up the above files, then run:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"15462089706814263000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose run --rm --no-deps web rails new . --force --no-deps --database=postgresql`, `15462089706814263000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run --rm --no-deps web rails new <span class=\"token builtin class-name\">.</span> --force --no-deps --database<span class=\"token operator\">=</span>postgresql</code></pre></div>\n<p>Now run:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"45338966754774910000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose build`, `45338966754774910000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose build</code></pre></div>\n<p>After building the image, then install webpacker:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"33370423869477593000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose run --rm web rails webpacker:install`, `33370423869477593000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run --rm web rails webpacker:install</code></pre></div>\n<p>This will provide you with a base for webpacker.</p>\n<p>Now setup the database in the <code class=\"language-text\">config/database.yml</code></p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"53258903927547175000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`# config/database.yml\n\ndefault: &default\n  adapter: postgresql\n  encoding: unicode\n  host: db\n  username: <%= ENV['POSTGRES_USER'] %>\n  password: <%= ENV['POSTGRES_PASSWORD'] %>\n  pool: 5\n\ndevelopment:\n  <<: *default\n  database: myapp_development\n\ntest:\n  <<: *default\n  database: myapp_test`, `53258903927547175000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># config/database.yml</span>\n\n<span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span> <span class=\"token important\">&amp;default</span>\n  <span class=\"token key atrule\">adapter</span><span class=\"token punctuation\">:</span> postgresql\n  <span class=\"token key atrule\">encoding</span><span class=\"token punctuation\">:</span> unicode\n  <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> db\n  <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> &lt;%= ENV<span class=\"token punctuation\">[</span><span class=\"token string\">'POSTGRES_USER'</span><span class=\"token punctuation\">]</span> %<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> &lt;%= ENV<span class=\"token punctuation\">[</span><span class=\"token string\">'POSTGRES_PASSWORD'</span><span class=\"token punctuation\">]</span> %<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">pool</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n\n<span class=\"token key atrule\">development</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">&lt;&lt;</span><span class=\"token punctuation\">:</span> <span class=\"token important\">*default</span>\n  <span class=\"token key atrule\">database</span><span class=\"token punctuation\">:</span> myapp_development\n\n<span class=\"token key atrule\">test</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">&lt;&lt;</span><span class=\"token punctuation\">:</span> <span class=\"token important\">*default</span>\n  <span class=\"token key atrule\">database</span><span class=\"token punctuation\">:</span> myapp_test</code></pre></div>\n<p>Next create the database.</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"46606252299562525000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose run --rm web bash -c &quot;rails db:create && rails db:migrate&quot;`, `46606252299562525000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run --rm web <span class=\"token function\">bash</span> -c <span class=\"token string\">\"rails db:create &amp;&amp; rails db:migrate\"</span></code></pre></div>\n<p>Finally, start the app:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"89069735615238780000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`docker-compose up`, `89069735615238780000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose up</code></pre></div>\n<p>Now you can view it on <code class=\"language-text\">localhost:3000</code></p>\n<p>Now, to deploy the app, simply do the following:</p>\n<div\n              class=\"gatsby-code-button-container customButtonContainerClass\"\n              data-toaster-id=\"49586664826062954000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied to clipboard!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`heroku login\nheroku apps:create <App-name>\ngit push heroku master\nheroku run rails db:migrate`, `49586664826062954000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy to clipboard\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">heroku login\nheroku apps:create <span class=\"token operator\">&lt;</span>App-name<span class=\"token operator\">></span>\n<span class=\"token function\">git</span> push heroku master\nheroku run rails db:migrate</code></pre></div>\n<p>And thats it ! Were all set and deployed.</p>\n<h2 id=\"links\">\n  <a href=\"#links\">Links</a>\n</h2>\n<p>\n  <a style=\"font-size: 1.1rem;\" href=\"https://github.com/ParamagicDev/getting-started-with-rails-6/tree/master\" id=\"source-code\">\n    Source Code on Github\n  </a>\n</p>\n<p>\n  <a style=\"font-size: 1.1rem;\" href=\"#todo\" id=\"deployed-app\">\n    Deployed Application\n  </a>\n</p>\n<h3 id=\"rails\">\n  <a href=\"#rails\">Rails</a>\n</h3>\n<p><a href=\"https://rubyonrails.org/\">Ruby on Rails Homepage</a></p>\n<p><a href=\"https://guides.rubyonrails.org/getting_started.html\">Ruby on Rails Getting Started Guide</a></p>\n<p><a href=\"https://github.com/rails/webpacker\">Webpacker Gem</a></p>\n<h3 id=\"docker\">\n  <a href=\"#docker\">Docker</a>\n</h3>\n<p><a href=\"https://docs.docker.com/compose/rails/\">Docker Compose with Rails</a></p>\n<h3 id=\"databases\">\n  <a href=\"#databases\">PostgresQL</a>\n</h3>\n<p><a href=\"https://www.postgresql.org/\">PostgresQL Homepage</a></p>\n<h3 id=\"heroku\">\n  <a href=\"#heroku\">\n    Heroku\n  </a>\n</h3>\n<p><a href=\"https://heroku.com\">Heroku Homepage</a></p>\n<p><a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails6\">Heroku with Rails\nDeployment</a></p>\n<h3 id=\"submit-a-pull-request\">\n  <a href=\"#submit-a-pull-request\">\n    Found something wrong? Submit a pull request!\n  </a>\n</h3>\n<p><a href=\"https://github.com/ParamagicDev/my-blog/blob/master/content/blog/rails/getting-started-with-rails-6.md\">Blog Source</a></p>\n<p><a href=\"https://github.com/ParamagicDev/getting-started-with-rails-6\">Rails App Source</a></p>","frontmatter":{"title":"Getting Started with Rails 6","date":"May 03, 2020","description":"A guide to getting setup with Rails 6 using Docker"}}},"pageContext":{"slug":"/rails/getting-started-with-rails-6/","previous":{"fields":{"slug":"/javascript/adding-emotion-typescript-and-jest/"},"frontmatter":{"title":"Adding Emotion, Typescript, and Jest to Gatsby"}},"next":{"fields":{"slug":"/bridgetownrb/dockerizing-bridgetown/"},"frontmatter":{"title":"Dockerizing Bridgetown"}}}}}