{"componentChunkName":"component---src-templates-blog-post-js","path":"/rails/getting-started-with-rails-6/","result":{"data":{"site":{"siteMetadata":{"title":"Konnor's Blog","author":"Konnor Rogers"}},"markdownRemark":{"id":"1b6ae32f-3179-5b5a-80db-3d85125c27f8","excerpt":"Purpose The purpose of this is to have a reusable source for setting up a Rails\nproject. I will be following the Getting Started with Rails\nGuide to setup a\nnew…","html":"<h2>Purpose</h2>\n<p>The purpose of this is to have a reusable source for setting up a Rails\nproject.</p>\n<p>I will be following the <a href=\"https://guides.rubyonrails.org/getting_started.html\">Getting Started with Rails\nGuide</a> to setup a\nnew Rails projects.</p>\n<p>I will also be using the <a href=\"https://docs.docker.com/compose/rails/\">Docker Quickstart with Compose and Rails\nguide</a></p>\n<p>I will also be using Docker just to provide a consistent development\nenvironment.</p>\n<h2 id=\"table-of-contents\">\n  <a href=\"#table-of-contents\">\n    Table Of Contents\n  </a>\n</h2>\n<ul>\n<li><a href=\"#prerequisites\">Prerequisites</a></li>\n<li>\n<p><a href=\"#getting-started\">Getting Started</a></p>\n<ul>\n<li><a href=\"#adding-a-dockerfile\">Adding a Dockerfile</a></li>\n<li><a href=\"#adding-a-gemfile\">Adding a Gemfile</a></li>\n</ul>\n</li>\n<li><a href=\"#links\">Links</a></li>\n</ul>\n<h2 id=\"prerequisites\">\n  <a href=\"#prerequisites\">\n    Prerequisites\n  </a>\n</h2>\n<ul>\n<li>Ruby >= 2.5.0</li>\n<li>Rails >= 6</li>\n<li>PostgresQL (or Sqlite3)</li>\n<li>Docker</li>\n<li>Docker Compose</li>\n</ul>\n<h2 id=\"getting-started\">\n  <a href=\"#getting-started\">\n    Getting Started\n  </a>\n</h2>\n<p>Alright first lets create our directory where we want the Rails app. I\nnamed mine <code class=\"language-text\">getting-started-with-rails-6</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> getting-started-with-rails-6\n<span class=\"token builtin class-name\">cd</span> getting-started-with-rails-6</code></pre></div>\n<br />\n<h2 id=\"adding-a-dockerfile\">\n  <a href=\"#adding-a-dockerfile\">Adding a Dockerfile</a>\n</h2>\n<p>The next step is to create our <code class=\"language-text\">Dockerfile</code>. This step is optional, if you\nwould like to skip this step feel free.</p>\n<p>The below <code class=\"language-text\">Dockerfile</code> is taken from the <a href=\"https://docs.docker.com/compose/rails/\">Docker Quickstart\nRails</a></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># Dockerfile</span>\nFROM ruby<span class=\"token punctuation\">:</span><span class=\"token number\">2.5</span>\nRUN apt<span class=\"token punctuation\">-</span>get update <span class=\"token punctuation\">-</span>qq &amp;&amp; apt<span class=\"token punctuation\">-</span>get install <span class=\"token punctuation\">-</span>y nodejs postgresql<span class=\"token punctuation\">-</span>client\nRUN mkdir /myapp\nWORKDIR /myapp\nCOPY Gemfile /myapp/Gemfile\nCOPY Gemfile.lock /myapp/Gemfile.lock\nRUN bundle install\nCOPY . /myapp\n\n<span class=\"token comment\"># Add a script to be executed every time the container starts.</span>\nCOPY entrypoint.sh /usr/bin/\nRUN chmod +x /usr/bin/entrypoint.sh\nENTRYPOINT <span class=\"token punctuation\">[</span><span class=\"token string\">\"entrypoint.sh\"</span><span class=\"token punctuation\">]</span>\nEXPOSE 3000\n\n<span class=\"token comment\"># Start the main process.</span>\nCMD <span class=\"token punctuation\">[</span><span class=\"token string\">\"rails\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"server\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-b\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0.0.0.0\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<br />\n<h3 id=\"adding-a-gemfile\">\n  Adding a Gemfile\n</h3>\n<p>Next we will deviate slightly from the above Docker quickstart. Instead\nof using Rails 5 we’ll use Rails 6.</p>\n<p>Create a <code class=\"language-text\">Gemfile</code> with the following contents:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># Gemfile</span>\nsource <span class=\"token string\">'https://rubygems.org'</span>\ngem <span class=\"token string\">'rails'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'~>6'</span></code></pre></div>\n<br />\n<p>Then add an empty <code class=\"language-text\">Gemfile.lock</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">touch</span> Gemfile.lock</code></pre></div>\n<br />\n<p>Now lets create an <code class=\"language-text\">entrypoint.sh</code> script to fix a server issue with\nRails.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token comment\"># entrypoint.sh</span>\n\n<span class=\"token builtin class-name\">set</span> -e\n\n<span class=\"token comment\"># Remove a potentially pre-existing server.pid for Rails.</span>\n<span class=\"token function\">rm</span> -f /myapp/tmp/pids/server.pid\n\n<span class=\"token comment\"># Then exec the container's main process (what's set as CMD in the Dockerfile).</span>\n<span class=\"token builtin class-name\">exec</span> <span class=\"token string\">\"<span class=\"token variable\">$@</span>\"</span></code></pre></div>\n<br />\n<h3 id=\"adding-docker-compose\">\n  <a href=\"#adding-docker-compose\">\n    Adding docker-compose.yml\n  </a>\n</h3>\n<p>Finally, lets add a <code class=\"language-text\">docker-compose.yml</code> with the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3'</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">db</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> postgres\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ./tmp/db<span class=\"token punctuation\">:</span>/var/lib/postgresql/data\n  <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span> .\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> bash <span class=\"token punctuation\">-</span>c \"rm <span class=\"token punctuation\">-</span>f tmp/pids/server.pid &amp;&amp; bundle exec rails s <span class=\"token punctuation\">-</span>p 3000 <span class=\"token punctuation\">-</span>b '0.0.0.0'\"\n\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> .<span class=\"token punctuation\">:</span>/myapp\n      <span class=\"token punctuation\">-</span> /myapp/node_modules\n\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"3000:3000\"</span>\n\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      RAILS_ENV=\"development\"\n\n    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> db</code></pre></div>\n<h2 id=\"links\">\n  <a href=\"#links\">Links</a>\n</h2>\n<h3 id=\"rails\">\n  <a href=\"#rails\">Rails</a>\n</h3>\n<p><a href=\"https://rubyonrails.org/\">Ruby on Rails Homepage</a></p>\n<p><a href=\"https://guides.rubyonrails.org/getting_started.html\">Ruby on Rails Getting Started Guide</a></p>\n<h3 id=\"docker\">\n  <a href=\"#docker\">Docker</a>\n</h3>\n<p><a href=\"https://docs.docker.com/compose/rails/\">Docker Compose with Rails</a></p>\n<h3 id=\"databases\">\n  <a href=\"#databases\">Databases</a>\n</h3>\n<p><a href=\"https://www.postgresql.org/\">PostgresQL Homepage</a></p>\n<p><a href=\"https://www.sqlite.org/index.html\">Sqlite3 Homepage</a></p>","frontmatter":{"title":"Getting Started with Rails 6","date":"May 03, 2020","description":"A guide to getting setup with Rails 6 using Docker"}}},"pageContext":{"slug":"/rails/getting-started-with-rails-6/","previous":{"fields":{"slug":"/javascript/adding-emotion-typescript-and-jest/"},"frontmatter":{"title":"Adding Emotion, Typescript, and Jest to Gatsby"}},"next":null}}}